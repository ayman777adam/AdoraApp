<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title data-lang-key="abella_system">Ù†Ø¸Ø§Ù… ÙÙ†Ø¯Ù‚ Ø£Ø¨ÙŠÙ„Ø§</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-body: #f4f6f8;
            --bg-card: #ffffff;
            --text-main: #37474f;
            --text-sec: #78909c;
            --border-color: #cfd8dc;
            --primary: #0097a7;       
            --primary-light: #e0f7fa; 
            --success: #00b894;
            --danger: #d63031;
            --warning: #f1c40f;
            --upgrade: #7e57c2;
            --gold-btn: #FFD700;     
            --shadow: 0 4px 20px rgba(0, 151, 167, 0.08);
        }

        body.dark-mode {
            --bg-body: #1e1e1e;
            --bg-card: #2d2d2d;
            --text-main: #dfe6e9;
            --text-sec: #b2bec3;
            --border-color: #444;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg-body);
            background-image: radial-gradient(#b0bec5 1px, transparent 1px);
            background-size: 20px 20px;
            color: var(--text-main);
            margin: 0;
            padding: 15px 15px 130px 15px; 
            -webkit-tap-highlight-color: transparent;
            overflow-x: hidden;
        }
        body.dark-mode { background-image: none; }

        .container { max-width: 500px; margin: 0 auto; }

        /* --- Header --- */
        .header-glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            border: 1px solid #fff;
            border-radius: 20px; padding: 15px; margin-bottom: 20px;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: var(--shadow);
        }
        body.dark-mode .header-glass { background: rgba(45,45,45,0.7); border-color:rgba(255,255,255,0.1); }
        
        .header-title { display: flex; align-items: center; gap: 10px; flex: 1; }
        .header-title h1 { font-size: 1rem; margin: 0; color: var(--primary); font-weight: 800; line-height: 1.2; }
        
        .tools-area { display: flex; gap: 8px; }
        .tools-btn { background: var(--bg-body); border: 1px solid var(--border-color); padding: 8px; border-radius: 10px; cursor: pointer; }

        /* --- VIEW CONTROLLERS --- */
        .worker-view { display: block; width: 100%; animation: fadeIn 0.3s; }
        .staff-view { display: none; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* --- UI Elements --- */
        .card, .section { background: var(--bg-card); border-radius: 18px; padding: 15px; box-shadow: var(--shadow); border: 1px solid var(--border-color); margin-bottom: 15px; }
        .sec-title { font-weight: 700; color: var(--primary); margin-bottom: 15px; border-bottom: 1px dashed var(--border-color); padding-bottom: 8px; }
        
        .log-title-clickable { cursor: pointer; display: flex; justify-content: space-between; align-items: center; }

        /* --- Search Bar --- */
        .search-box {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            background: var(--bg-body);
            color: var(--text-main);
            font-family: 'Tajawal', sans-serif;
            font-weight: bold;
            margin-bottom: 15px;
            box-sizing: border-box;
            transition: 0.3s;
        }
        .search-box:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        /* --- Worker UI Specifics --- */
        .room-row {
            background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px;
            padding: 10px; margin-bottom: 10px; 
            /* Grid: Timer | Room# | Type | Button */
            display: grid; grid-template-columns: 50px 0.8fr 1fr auto; gap: 8px;
            align-items: center; border-right: 4px solid transparent; transition: 0.3s;
        }
        .room-row.status-cleaning { border-right-color: var(--primary); background: #f0fbfc; }
        .room-row.status-checking_live { border-right-color: var(--warning); background: #fffde7; }
        .room-row.status-checking { border-right-color: var(--success); background: #f0fbfc; }
        .room-row.status-over { border-right-color: var(--danger); background: #ffebee; animation: pulseRed 2s infinite; }
        .room-row.status-acknowledging { border-right-color: var(--upgrade); background: #f3e5f5; } 
        
        @keyframes pulseRed { 0% {box-shadow: 0 0 0 0 rgba(214, 48, 49, 0.4);} 70% {box-shadow: 0 0 0 10px rgba(214, 48, 49, 0);} 100% {box-shadow: 0 0 0 0 rgba(214, 48, 49, 0);} }

        .timer-display { font-weight: 800; font-size: 1rem; text-align: center; color: var(--text-sec); }
        .timer-active { color: var(--primary); }
        .timer-danger { color: var(--danger); }
        
        .room-input { 
            width: 100%; border: none; background: transparent; font-size: 1.1rem; font-weight: 800; 
            text-align: center; color: var(--text-main); border-bottom: 2px dashed #ddd; 
        }
        
        .type-select {
            width: 100%; padding: 5px; border-radius: 8px; border: 1px solid var(--border-color);
            background: var(--bg-body); font-size: 0.75rem; font-weight: bold; color: var(--text-main);
            margin-bottom: 4px; /* Space before sub-select */
        }
        .sub-select-container { 
             display: flex; flex-direction: column; 
             gap: 4px;
             padding-top: 4px;
        }

        .btn-action { padding: 8px 10px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: #fff; font-size: 0.8rem; }
        .btn-start { background: var(--primary); }
        .btn-check { background: var(--warning); color: #333; font-size: 0.7rem; }
        .btn-finish { background: var(--success); }
        .btn-undo { background: #fab1a0; color: var(--danger); margin-top: 5px; font-size: 0.6rem; width: 100%; }

        .badge { font-size: 0.6rem; padding: 2px 4px; border-radius: 4px; background: #eee; color: #666; display: block; margin-top: 2px; }

        /* Indicators */
        .quiet-notif { background: var(--warning); color: #333; padding: 8px; text-align: center; border-radius: 8px; font-size: 0.8rem; font-weight: bold; margin-bottom: 10px; display: none; }
        
        /* Sync Indicator */
        #sync-indicator {
            position: fixed; top: 15px; left: 15px;
            background: rgba(0,0,0,0.7); color: white;
            padding: 5px 10px; border-radius: 15px;
            font-size: 0.7rem; display: none; z-index: 9999;
            backdrop-filter: blur(5px);
        }

        /* Stats Grid */
        .stats-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr 1fr; 
            gap: 10px 5px; 
            text-align: center; 
            margin-bottom: 15px; 
        }
        .stat-box h4 { margin: 0; font-size: 1.2rem; color: var(--upgrade); }
        .stat-box span { font-size: 0.7rem; color: var(--text-sec); }
        
        /* New Stat Boxes for Clean Look */
        .stat-box-item {
            padding: 6px 4px; 
            border-radius: 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            background: var(--bg-body);
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .stat-box-item h4 {
            font-size: 1.0rem; 
        }
        .stat-box-item span {
            font-size: 0.55rem; 
        }

        /* Stats Circular Visualization */
        .stat-circle-box {
            text-align: center;
        }
        .circle-viz {
            width: 70px; 
            height: 70px; 
            border-radius: 50%;
            margin: 0 auto 5px auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: var(--bg-body);
            /* Soft 3D Shadow Effect */
            box-shadow: 4px 4px 8px rgba(0,0,0,0.1), -4px -4px 8px rgba(255,255,255,0.8); 
            border: 5px solid var(--bg-body); 
            transition: 0.3s;
        }
        .circle-viz h3 {
            margin: 0;
            font-size: 1.4rem; 
            color: var(--text-main);
        }
        .circle-viz span {
            font-size: 0.6rem; 
            color: var(--text-sec);
        }

        /* Modal */
        .modal-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); display: none; justify-content: center; align-items: center; z-index: 2000; }
        .modal-content { background: var(--bg-card); padding: 20px; border-radius: 20px; width: 90%; max-width: 350px; }
        .modal-content select, .modal-content input, .modal-content textarea { width: 100%; padding: 12px; margin-bottom: 10px; border: 1px solid var(--border-color); border-radius: 8px; box-sizing: border-box; }
        .modal-label { font-size: 0.85rem; font-weight: 700; margin-bottom: 5px; display: block; color: var(--text-main); }
        .required-field { border: 2px solid var(--danger) !important; }

        /* Footer */
        .sticky-footer {
            position: fixed; bottom: 35px; /* Lift above the dev footer */
            left: 0; width: 100%;
            background: rgba(255,255,255,0.95); backdrop-filter: blur(10px);
            border-top: 1px solid var(--border-color); padding: 15px; box-sizing: border-box;
            border-radius: 20px 20px 0 0; z-index: 999;
        }
        body.dark-mode .sticky-footer { background: rgba(30,30,30,0.95); }
        .full-btn { width: 100%; padding: 12px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 1rem; color: white; }
        
        /* Confirmation Toast Style */
        .worker-toast {
            position: fixed; 
            top: 65px; 
            left: 50%; 
            transform: translateX(-50%); 
            background: var(--upgrade); 
            color: white; 
            padding: 8px 15px; 
            border-radius: 20px;
            font-size: 0.9rem; 
            font-weight: 700; 
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s, transform 0.3s; 
            z-index: 1500;
        }
        .worker-toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
        
        /* Camera Input Styling */
        #camera-label {
            display: block;
            background: var(--primary);
            color: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
        }
        #camera-label:active { background: #007983; }
        #file-label {
            display: block;
            background: var(--text-sec);
            color: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
        }
        #file-label:active { background: #5a6d75; }
        #modal-img-camera-input, #modal-img-pdf-input {
            width: 0.1px;
            height: 0.1px;
            opacity: 0;
            overflow: hidden;
            position: absolute;
            z-index: -1;
        }
        
        /* Fixed Developer Footer */
        #dev-footer-fixed {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 0.7rem;
            color: #90a4ae; 
            background: var(--bg-card); 
            padding: 5px 0;
            border-top: 1px solid var(--border-color);
            z-index: 1000;
        }
        
        /* New: Consolidated Action Row */
        .worker-action-row {
            display: flex; 
            gap: 10px; 
            width: 100%; 
            margin-bottom: 10px; 
            flex-wrap: wrap; 
        }
        .worker-action-row .full-btn {
            flex: 1 1 48%; 
        }
    </style>
</head>
<body class="worker-mode"> <div class="container">
        <div class="header-glass">
            <div class="header-title" style="align-items:center; gap:12px;">
                <h1 id="header-text" style="margin:0;" data-lang-key="staff_interface">ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¹Ù…Ø§Ù„<br><span style="font-size:0.7rem; opacity:0.7;" data-lang-key="tracking_table">ØªØªØ¨Ø¹ Ø§Ù„ØºØ±Ù</span></h1>

                <div id="lang-container" style="margin-left:6px; display:flex; align-items:center;">
                    <div style="position:relative; display:inline-block;">
                        <button id="langBtn" class="tools-btn" style="padding:6px 10px; font-weight:700;" data-lang-key="lang_button">ğŸŒ Ø§Ù„Ù„ØºØ© â–¾</button>
                        <div id="langMenu" style="position:absolute; top:38px; right:0; display:none; background:#fff; border:1px solid var(--border-color); border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.12); z-index:9999; min-width:140px; overflow:hidden;">
                            <div class="langItem" data-lang="ar" style="padding:10px 12px; cursor:pointer; white-space:nowrap;" data-lang-key="lang_ar">Ø¹Ø±Ø¨ÙŠ</div>
                            <div class="langItem" data-lang="en" style="padding:10px 12px; cursor:pointer; white-space:nowrap;" data-lang-key="lang_en">English</div>
                            <div class="langItem" data-lang="ur" style="padding:10px 12px; cursor:pointer; white-space:nowrap;" data-lang-key="lang_ur">Ø§Ø±Ø¯Ùˆ</div>
                            <div class="langItem" data-lang="bn" style="padding:10px 12px; cursor:pointer; white-space:nowrap;" data-lang-key="lang_bn">à¦¬à¦¾à¦‚à¦²à¦¾</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tools-area">
                <button class="tools-btn" onclick="document.body.classList.toggle('dark-mode')" data-lang-key="dark_mode_btn">ğŸŒ™</button>
            </div>
        </div>

        <div class="worker-view">
            <div id="worker-toast" class="worker-toast"></div>
            
            <div id="offline-indicator" class="quiet-notif" style="background:var(--danger); color:white;" data-lang-key="offline_mode">âš ï¸ ÙˆØ¶Ø¹ Ø¹Ø¯Ù… Ø§Ù„Ø§ØªØµØ§Ù„: ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ§Ù‹</div>
            <div id="rain-mode-indicator" class="quiet-notif" style="background:var(--upgrade); color:white;" data-lang-key="high_pressure">âš¡ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙŠØ±Ø¨Ùˆ Ù…ÙØ¹Ù‘Ù„</div>
            <div id="timer-alert-bar" class="quiet-notif" data-lang-key="warn_overtime">âš ï¸ Ø§Ù†ØªØ¨Ù‡: ÙŠÙˆØ¬Ø¯ ØºØ±Ù ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯!</div>
            <div id="sync-indicator">ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...</div>

            <div class="section" style="margin-bottom:15px;">
                <div class="worker-action-row" style="margin-bottom: 0;">
                    <button id="turbo-mode-btn" class="full-btn" style="background:var(--success); font-size:0.9rem; flex: 1;" onclick="toggleTurboMode()" data-lang-key="turbo_btn_on">
                        ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙŠØ±Ø¨Ùˆ Ù„ÙƒÙ„ Ø§Ù„ØºØ±Ù - Ø§Ù„Ù…ÙˆØ§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦
                    </button>
                    <button id="report-btn-action" class="full-btn" style="background:var(--gold-btn); color: var(--text-main); font-size:0.9rem; flex: 1;" onclick="generateDailyReport()" data-lang-key="send_daily_report">
                        Ø§ØºÙ„Ø§Ù‚ Ø§Ù„ÙŠÙˆÙ… Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù†Ø¸Ø§ÙØ© Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„Ù„Ø§Ø¯Ø§Ø±Ù‡
                    </button>
                </div>
            </div>


            <div class="section" style="padding:15px;">
                <div class="sec-title" style="display: flex; justify-content: space-between; align-items: center;">
                    <span data-lang-key="stats_title">ğŸ“ˆ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</span>
                    <button class="tools-btn" style="padding: 5px 8px;" onclick="showResetModal()" data-lang-key="reset_btn">ğŸ—‘ï¸</button>
                </div>
                
                <div class="stats-grid" style="grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                    
                    <div class="stat-circle-box">
                        <div class="circle-viz" style="border: 5px solid var(--danger);">
                            <h3 id="fastest-out-num">--</h3>
                            <span id="fastest-out-time" data-lang-key="fastest_out">Ø£Ø³Ø±Ø¹ Ø®Ø±ÙˆØ¬</span>
                        </div>
                    </div>

                    <div class="stat-circle-box">
                        <div class="circle-viz" style="border: 5px solid var(--primary);">
                            <h3 id="fastest-stay-num">--</h3>
                            <span id="fastest-stay-time" data-lang-key="fastest_stay">Ø£Ø³Ø±Ø¹ Ø³Ø§ÙƒÙ†</span>
                        </div>
                    </div>
                    
                </div>
                
                <div style="border-top: 1px dashed var(--border-color); margin-top: 0; padding-top: 15px;">
                    <div class="stats-grid" style="grid-template-columns: 1fr 1fr 1fr; gap: 10px 5px;">
                        
                        <div class="stat-box-item"><h4 id="stat-completed">0</h4><span data-lang-key="completed" style="color:var(--upgrade)">ØªÙ… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²</span></div>
                        <div class="stat-box-item"><h4 id="stat-avg">0Ø¯</h4><span data-lang-key="avg_time" style="color:var(--text-sec)">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø²Ù…Ù†</span></div>
                        <div class="stat-box-item"><h4 id="stat-over">0</h4><span data-lang-key="delay" style="color:var(--danger)">ØªØ£Ø®ÙŠØ±</span></div>
                        
                        <div class="stat-box-item"><h4 id="stat-out-count">0</h4><span data-lang-key="out_rooms" style="color:var(--danger)">ØºØ±Ù Ø®Ø±ÙˆØ¬</span></div>
                        <div class="stat-box-item"><h4 id="stat-stay-count">0</h4><span data-lang-key="stay_rooms" style="color:var(--primary)">ØºØ±Ù Ø³Ø§ÙƒÙ†</span></div>
                        <div class="stat-box-item"><h4 id="stat-max-time">--</h4><span data-lang-key="max_time" style="color:var(--warning)">Ø£Ù‚ØµÙ‰ ÙˆÙ‚Øª ØªÙ†Ø¸ÙŠÙ</span></div>
                        
                        <div class="stat-box-item"><h4 id="stat-min-time">--</h4><span data-lang-key="min_time" style="color:var(--success)">Ø£Ø¯Ù†Ù‰ ÙˆÙ‚Øª ØªÙ†Ø¸ÙŠÙ</span></div>
                        <div class="stat-box-item" style="background:#f4f6f8; box-shadow:none;"></div> <div class="stat-box-item" style="background:#f4f6f8; box-shadow:none;"></div> </div>
                </div>
            </div>

            <div class="section">
                <div class="sec-title" data-lang-key="tracking_table">ğŸšª ØªØªØ¨Ø¹ Ø§Ù„ØºØ±Ù (Ø¬Ø¯ÙˆÙ„ Ø°ÙƒÙŠ)</div>
                
                <input type="text" id="search-bar" class="search-box" placeholder="ğŸ” Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„ØºØ±ÙØ© Ø£Ùˆ Ø§Ù„Ø­Ø§Ù„Ø©..." oninput="updateSearch(this.value)">

                <div id="rooms-container">
                    </div>
            </div>

            <div class="section">
                <div class="sec-title" style="display: flex; justify-content: space-between; align-items: center;">
                    <span data-lang-key="latest_operations">ğŸ“‹ Ø¢Ø®Ø± Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ù†Ø¬Ø²Ø©</span>
                    <button class="tools-btn" style="padding: 5px 8px; font-size: 1.1rem;" onclick="showLogClearModal()" data-lang-key="reset_btn">ğŸ—‘ï¸</button>
                </div>
                <div id="worker-log-list" style="font-size:0.8rem; max-height:200px; overflow-y:auto;">
                    <p id="log-none-p" style="text-align:center; color:#999;" data-lang-key="log_none">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ø¹Ø¯</p>
                </div>
            </div>
        </div>

        </div>

    <div class="sticky-footer">
        <div class="worker-view">
            </div>
        </div>

    <div id="dev-footer-fixed" data-lang-key="developed_by">
        ØªØ·ÙˆÙŠØ± .. Ø§ÙŠÙ…Ù† Ø§Ø¨Ùˆ ÙˆØ±Ø¯Ù‡ 77aayy@gmail.com
    </div>

    <div id="rain-prompt-modal" class="modal-overlay">
        <div class="modal-content" style="text-align:center;">
            <h3 style="color:var(--primary); margin-top:0;" data-lang-key="pressure_mode">Ø§Ø®ØªØ± ÙˆØ¶Ø¹ Ø§Ù„Ø¨Ø¯Ø¡</h3>
            <p data-lang-key="pressure_mode_msg">Ù…Ø§ Ù‡Ùˆ ÙˆØ¶Ø¹ Ø§Ù„Ø¶ØºØ· Ù„Ù‡Ø°Ù‡ Ø§Ù„ØºØ±ÙØ©ØŸ</p>
            <button class="full-btn" style="background:var(--danger); margin-bottom:10px;" onclick="commitStartRoom(window.tempRoomId, true)" data-lang-key="high_pressure">âš¡ Ø¶ØºØ· Ø¹Ø§Ù„ÙŠ (Rain Mode)</button>
            <button class="full-btn" style="background:var(--success);" onclick="commitStartRoom(window.tempRoomId, false)" data-lang-key="normal_mode">ÙˆØ¶Ø¹ Ø¹Ø§Ø¯ÙŠ (Normal)</button>
        </div>
    </div>

    <div id="final-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 style="margin-top:0; color:var(--primary);" id="modal-title-text" data-lang-key="room_inspection">ğŸ“ ØªÙ‚Ø±ÙŠØ± ÙØ­Øµ Ø§Ù„ØºØ±ÙØ©</h3>
            
            <div id="delay-reason-section"> 
                <label class="modal-label" id="delay-reason-label" data-lang-key="delay_reasons">Ø³Ø¨Ø¨ Ø§Ù„ØªØ£Ø®ÙŠØ± (Ø¥Ù† ÙˆØ¬Ø¯):</label>
                <select id="modal-delay" onchange="updateImageRequirementUI()">
                    <option value="Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ£Ø®ÙŠØ±" data-lang-key="none">Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ£Ø®ÙŠØ±</option>
                    <option value="Ø§Ù„Ø§Ù†Ø´ØºØ§Ù„ Ø¨Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„" data-lang-key="busy_reception">Ø§Ù„Ø§Ù†Ø´ØºØ§Ù„ Ø¨Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„</option>
                    <option value="Ø§Ù„ØºØ±ÙØ© Ø¨Ù‡Ø§ Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙƒØ«ÙŠØ±Ø©" data-lang-key="room_many_notes">Ø§Ù„ØºØ±ÙØ© Ø¨Ù‡Ø§ Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙƒØ«ÙŠØ±Ø©</option>
                    <option value="Ø³Ø¨Ø¨ Ø¢Ø®Ø±" data-lang-key="other_reason">Ø³Ø¨Ø¨ Ø¢Ø®Ø±</option>
                </select>
            </div>


            <label class="modal-label" data-lang-key="worker_notes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙØ­Øµ:</label>
            <select id="modal-notes" onchange="updateMaintenanceUI()">
                <option value="Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª" data-lang-key="none_notes">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª</option>
                <option value="ØªØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø©" data-lang-key="needs_maintenance">ØªØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø©</option>
                <option value="Ù†Ù‚Øµ Ù…ÙØ§Ø±Ø´" data-lang-key="missing_linens">Ù†Ù‚Øµ Ù…ÙØ§Ø±Ø´</option>
                <option value="Deep Clean Needed" data-lang-key="deep_clean">ØªØ­ØªØ§Ø¬ Ù†Ø¸Ø§ÙØ© Ø¹Ù…ÙŠÙ‚Ø©</option>
            </select>
            
            <div id="maintenance-fields" style="border: 1px dashed var(--warning); padding: 10px; border-radius: 8px; margin-bottom: 10px; display: none;">
                <label class="modal-label" style="color:var(--danger);" data-lang-key="maintenance_details_label">ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØµÙŠØ§Ù†Ø© (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ):</label>
                <textarea id="repair-details-input" data-lang-placeholder="maintenance_details_placeholder" placeholder="Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø©ØŸ"></textarea>
                
                <label class="modal-label" data-lang-key="maintenance_status_label">Ø­Ø§Ù„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©:</label>
                <select id="repair-status-select" onchange="updateMaintenanceImageStatus()">
                    <option value="Ongoing" data-lang-key="maintenance_status_ongoing">Ø¬Ø§Ø±ÙŠØ©</option>
                    <option value="Completed" data-lang-key="maintenance_status_completed">ØªÙ…Øª Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„ØµÙŠØ§Ù†Ø© (ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø©)</option>
                </select>
            </div>

            <label class="modal-label" id="image-label" data-lang-key="status_proof">Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø©:</label>
            <div style="display:flex; flex-direction:column; gap:10px;">
                <label id="camera-label" for="modal-img-camera-input" data-lang-key="image_camera">
                    ğŸ“¸ Ø§ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
                </label>
                <input type="file" accept="image/*" capture="environment" id="modal-img-camera-input">
                
                <label id="file-label" for="modal-img-pdf-input" data-lang-key="image_file">
                     ğŸ“„ Ø±ÙØ¹ Ù…Ù„Ù Ù…Ù† Ø§Ù„Ø§Ø³ØªØ¯ÙŠÙˆ (ØµÙˆØ±Ø©/PDF)
                </label>
                <input type="file" accept="image/*, application/pdf" multiple id="modal-img-pdf-input">
            </div>
            <div style="font-size:0.7rem; color:#999; margin-top:5px; margin-bottom:10px;" data-lang-key="photo_hint">(ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·)</div>

            <button class="full-btn" id="btn_confirm_finish" style="background:var(--success); margin-top:10px;" onclick="confirmFinishRoom()" data-lang-key="confirm_send">ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø±Ø³Ø§Ù„ ğŸš€</button>
            <button class="full-btn" id="btn_cancel" style="background:#ddd; color:#333;" onclick="closeModal()" data-lang-key="cancel">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>
    
    <div id="password-modal" class="modal-overlay">
        <div class="modal-content" style="text-align:center;">
            <h3 style="color:var(--danger); margin-top:0;" id="password-modal-title" data-lang-key="password_modal_title_reset">ØªØµÙÙŠØ© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
            <p id="reset-status-msg" style="font-size:0.9rem;"></p>
            
            <input type="password" id="admin-password" data-lang-placeholder="password_placeholder" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" style="width:100%; margin-bottom:15px;" />

            <button id="confirm-reset-btn" class="full-btn" style="background:var(--success); margin-bottom:10px;" onclick="checkPasswordAndReset('full_reset')" data-lang-key="btn_confirm_reset">ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØµÙÙŠØ©</button>
            <button class="full-btn" style="background:#ddd; color:#333;" onclick="document.getElementById('password-modal').style.display='none'" data-lang-key="cancel">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>
    
    <div id="action-confirm-modal" class="modal-overlay">
        <div class="modal-content" style="text-align:center;">
            <h3 id="confirm-title" style="color:var(--danger); margin-top:0;" data-lang-key="confirm_modal_title">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</h3>
            <p id="confirm-message" style="font-size:0.9rem;" data-lang-key="confirm_modal_message">Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ</p>
            
            <button id="confirm-yes-btn" class="full-btn" style="background:var(--success); margin-bottom:10px;" data-lang-key="confirm_modal_yes">Ù†Ø¹Ù…ØŒ Ø£Ø¤ÙƒØ¯</button>
            <button class="full-btn" style="background:#ddd; color:#333;" onclick="document.getElementById('action-confirm-modal').style.display='none'" data-lang-key="cancel">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>
    <script>
        // --- CONFIG & STATE ---
        // ğŸ”’ HASHED PASSWORD "fahd5"
        function simpleHash(s) {
            let h = 0xdeadbeef;
            for(let i=0;i<s.length;i++) h = Math.imul(h ^ s.charCodeAt(i), 2654435761);
            return ((h ^ h >>> 16) >>> 0);
        }
        const ADMIN_HASH = 97325605; // Hash for "fahd5"
        const STATE_KEY = 'abella_v6_fixed';

        // ğŸ”¥ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Firebase Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ ğŸ”¥
        const firebaseConfig = {
          apiKey: "AIzaSyDJ8EWvicHqjvX-g1-19oS5h-VUQjRjtG8",
          authDomain: "abella-all.firebaseapp.com",
          databaseURL: "https://abella-all-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "abella-all",
          storageBucket: "abella-all.firebasestorage.app",
          messagingSenderId: "608492409476",
          appId: "1:608492409476:web:6d6ac8e85dd2fba1b328d1"
        };
        
        // ğŸ”¥ Initialize Firebase and Firestore
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const collectionName = 'workerState_v1'; // Ø§Ø³Ù… Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© ÙÙŠ Firestore

        let isTurboMode = false; // NEW: Global Turbo Mode
        let workerState = { rooms: [], log: [] };
        let buffer = [];
        let searchText = ""; // ğŸ” Search State
        
        // --- TRANSLATION DATA ---
        // Ø§Ù„Ù…ÙØ§ØªÙŠØ­ ØªÙ… ØªÙˆÙ„ÙŠØ¯Ù‡Ø§ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¯ØŒ ÙˆØ§Ù„Ù‚ÙŠÙ… Ù…Ø£Ø®ÙˆØ°Ø© Ù…Ù† Ù…Ù„ÙØ§Øª JSON Ø§Ù„Ù…Ø±ÙÙ‚Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        const TRANSLATIONS = {
            'ar': {
                'abella_system': 'Ù†Ø¸Ø§Ù… ÙÙ†Ø¯Ù‚ Ø£Ø¨ÙŠÙ„Ø§',
                'staff_interface': 'ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¹Ù…Ø§Ù„',
                'tracking_table': 'ØªØªØ¨Ø¹ Ø§Ù„ØºØ±Ù',
                'lang_button': 'ğŸŒ Ø§Ù„Ù„ØºØ© â–¾',
                'lang_ar': 'Ø¹Ø±Ø¨ÙŠ',
                'lang_en': 'English',
                'lang_ur': 'Ø§Ø±Ø¯Ùˆ',
                'lang_bn': 'à¦¬à¦¾à¦‚à¦²à¦¾',
                'dark_mode_btn': 'ğŸŒ™',
                'developed_by': 'ØªØ·ÙˆÙŠØ±: Ø£ÙŠÙ…Ù† Ø£Ø¨Ùˆ ÙˆØ±Ø¯Ø©',
                'offline_mode': 'âš ï¸ ÙˆØ¶Ø¹ Ø¹Ø¯Ù… Ø§Ù„Ø§ØªØµØ§Ù„: ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ§Ù‹',
                'high_pressure': 'âš¡ ÙˆØ¶Ø¹ Ø¶ØºØ· Ø¹Ø§Ù„ÙŠ Ù…ÙØ¹Ù‘Ù„',
                'warn_overtime': 'âš ï¸ Ø§Ù†ØªØ¨Ù‡: Ø¨Ø¹Ø¶ Ø§Ù„ØºØ±Ù ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯!',
                'turbo_btn_on': 'ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙŠØ±Ø¨Ùˆ Ù„ÙƒÙ„ Ø§Ù„ØºØ±Ù - Ø§Ù„Ù…ÙˆØ§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦',
                'turbo_btn_off': 'âš¡ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙŠØ±Ø¨Ùˆ Ù…ÙØ¹Ù‘Ù„ (Ø¥Ù„ØºØ§Ø¡)',
                'send_daily_report': 'Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ ğŸ“',
                'stats_title': 'ğŸ“ˆ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø­Ø§Ù„ÙŠØ©',
                'reset_btn': 'ğŸ—‘ï¸',
                'fastest_out': 'Ø£Ø³Ø±Ø¹ Ø®Ø±ÙˆØ¬',
                'fastest_stay': 'Ø£Ø³Ø±Ø¹ Ø³Ø§ÙƒÙ†',
                'completed': 'ØªÙ… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²',
                'avg_time': 'Ù…ØªÙˆØ³Ø· Ø§Ù„Ø²Ù…Ù†',
                'delay': 'ØªØ£Ø®ÙŠØ±',
                'out_rooms': 'ØºØ±Ù Ø®Ø±ÙˆØ¬',
                'stay_rooms': 'ØºØ±Ù Ø³Ø§ÙƒÙ†',
                'max_time': 'Ø£Ù‚ØµÙ‰ ÙˆÙ‚Øª ØªÙ†Ø¸ÙŠÙ',
                'min_time': 'Ø£Ø¯Ù†Ù‰ ÙˆÙ‚Øª ØªÙ†Ø¸ÙŠÙ',
                'rooms_title': 'ğŸšª ØªØªØ¨Ø¹ Ø§Ù„ØºØ±Ù (Ø¬Ø¯ÙˆÙ„ Ø°ÙƒÙŠ)',
                'latest_operations': 'ğŸ“‹ Ø¢Ø®Ø± Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ù†Ø¬Ø²Ø©',
                'log_none': 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ø¹Ø¯',
                'input_placeholder': 'Ø±Ù‚Ù… Ø§Ù„ØºØ±ÙØ©',
                'type_select_default': 'Ø­Ø§Ù„Ø© Ø§Ù„ØºØ±ÙØ©...',
                'type_option_stay': 'ğŸ‘¤ Ø³Ø§ÙƒÙ†',
                'type_option_out': 'ğŸšª Ø®Ø±ÙˆØ¬',
                'guest_status_default': 'Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø²ÙŠÙ„...',
                'guest_status_in': 'Ø§Ù„Ù†Ø²ÙŠÙ„ Ø¯Ø§Ø®Ù„ Ø§Ù„ØºØ±ÙØ©',
                'guest_status_out': 'Ø§Ù„Ù†Ø²ÙŠÙ„ Ø¨Ø§Ù„Ø®Ø§Ø±Ø¬',
                'btn_start': 'Ø¨Ø¯Ø¡',
                'btn_acknowledge': 'ØªÙ… Ø§Ù„Ø¹Ù„Ù… ÙˆØ¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„',
                'btn_check': 'âœ… ØªÙ… Ø§Ù„ØªÙ†Ø¸ÙŠÙ (Ø¨Ø¯Ø¡ Ø§Ù„ÙØ­Øµ)',
                'btn_finish_inspection': 'Ø§Ù†ØªÙ‡Ø§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ÙØ­Øµ',
                'btn_document_finish': 'ØªÙˆØ«ÙŠÙ‚ ÙˆØ¥Ù†Ù‡Ø§Ø¡',
                'btn_undo': 'ØªØ±Ø§Ø¬Ø¹',
                'status_moving': 'Ø§Ù†ØªÙ‚Ø§Ù„',
                'status_cleaning': 'ØªÙ†Ø¸ÙŠÙ',
                'status_checking_live': 'ÙØ­Øµ Ù…Ø¨Ø§Ø´Ø±',
                'status_checking': 'Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙˆØ«ÙŠÙ‚',
                'alert_room_num_type': 'ğŸ”´ ÙŠØ¬Ø¨ ÙƒØªØ§Ø¨Ø© Ø±Ù‚Ù… Ø§Ù„ØºØ±ÙØ© ÙˆØ§Ø®ØªÙŠØ§Ø± Ø­Ø§Ù„ØªÙ‡Ø§',
                'alert_guest_status': 'ğŸ”´ ÙŠØ¬Ø¨ ØªØ­Ø¯ÙŠØ¯ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø²ÙŠÙ„ (Ø¯Ø§Ø®Ù„/Ø®Ø§Ø±Ø¬) Ù„ØºØ±ÙØ© Ø§Ù„Ø³Ø§ÙƒÙ†.',
                'confirm_start_msg': 'Ø¨Ø¯Ø¡ ØªÙ†Ø¸ÙŠÙ Ø§Ù„ØºØ±ÙØ© {num}ØŸ',
                'confirm_acknowledge_msg': 'ØªÙ… Ø§Ù„Ø¹Ù„Ù… ÙˆØ¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØºØ±ÙØ© {num}ØŸ',
                'confirm_check_msg': 'Ø¨Ø¯Ø¡ ÙØ­Øµ Ø§Ù„ØºØ±ÙØ© {num}ØŸ',
                'confirm_finish_inspection_msg': 'Ø¥Ù†Ù‡Ø§Ø¡ ÙØ­Øµ Ø§Ù„ØºØ±ÙØ© {num}ØŸ',
                'toast_start_ack': 'Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØºØ±ÙØ© {num} ({mode})',
                'toast_start_clean': 'Ø¨Ø¯Ø¡ ØªÙ†Ø¸ÙŠÙ Ø§Ù„ØºØ±ÙØ© {num}',
                'toast_start_check': 'Ø¨Ø¯Ø¡ Ù…Ø±Ø­Ù„Ø© Ø§Ù„ÙØ­Øµ',
                'toast_room_documented': 'ØªÙ… Ø¥Ù†Ø¬Ø§Ø² ÙˆØªÙˆØ«ÙŠÙ‚ Ø§Ù„ØºØ±ÙØ© {num}',
                'pressure_mode': 'Ø§Ø®ØªØ± ÙˆØ¶Ø¹ Ø§Ù„Ø¨Ø¯Ø¡',
                'pressure_mode_msg': 'Ù…Ø§ Ù‡Ùˆ ÙˆØ¶Ø¹ Ø§Ù„Ø¶ØºØ· Ù„Ù‡Ø°Ù‡ Ø§Ù„ØºØ±ÙØ©ØŸ',
                'normal_mode': 'ÙˆØ¶Ø¹ Ø¹Ø§Ø¯ÙŠ (Normal)',
                'room_inspection': 'ğŸ“ ØªÙ‚Ø±ÙŠØ± ÙØ­Øµ Ø§Ù„ØºØ±ÙØ©',
                'delay_reasons': 'Ø³Ø¨Ø¨ Ø§Ù„ØªØ£Ø®ÙŠØ± (Ø¥Ù† ÙˆØ¬Ø¯):',
                'none': 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ£Ø®ÙŠØ±',
                'busy_reception': 'Ø§Ù„Ø§Ù†Ø´ØºØ§Ù„ Ø¨Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„',
                'room_many_notes': 'Ø§Ù„ØºØ±ÙØ© Ø¨Ù‡Ø§ Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙƒØ«ÙŠØ±Ø©',
                'other_reason': 'Ø³Ø¨Ø¨ Ø¢Ø®Ø±',
                'worker_notes': 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙØ­Øµ:',
                'none_notes': 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª',
                'needs_maintenance': 'ØªØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø©',
                'missing_linens': 'Ù†Ù‚Øµ Ù…ÙØ§Ø±Ø´',
                'deep_clean': 'ØªØ­ØªØ§Ø¬ Ù†Ø¸Ø§ÙØ© Ø¹Ù…ÙŠÙ‚Ø©',
                'maintenance_details_label': 'ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØµÙŠØ§Ù†Ø© (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ):',
                'maintenance_details_placeholder': 'Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø©ØŸ',
                'maintenance_status_label': 'Ø­Ø§Ù„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©:',
                'maintenance_status_ongoing': 'Ø¬Ø§Ø±ÙŠØ©',
                'maintenance_status_completed': 'ØªÙ…Øª Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„ØµÙŠØ§Ù†Ø© (ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø©)',
                'status_proof': 'Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø©:',
                'image_camera': 'ğŸ“¸ Ø§ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§',
                'image_file': 'ğŸ“„ Ø±ÙØ¹ Ù…Ù„Ù Ù…Ù† Ø§Ù„Ø§Ø³ØªØ¯ÙŠÙˆ (ØµÙˆØ±Ø©/PDF)',
                'photo_hint': '(ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·)',
                'confirm_send': 'ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø±Ø³Ø§Ù„ ğŸš€',
                'cancel': 'Ø¥Ù„ØºØ§Ø¡',
                'alert_repair_details': 'ğŸ”´ Ù…Ø·Ù„ÙˆØ¨: ÙŠØ¬Ø¨ ÙˆØµÙ Ø§Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø©.',
                'alert_image_mandatory': "ğŸ”´ Ù…Ø·Ù„ÙˆØ¨: ÙŠØ¬Ø¨ Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ±Ø© Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± 'Ø§Ù„ØºØ±ÙØ© Ø¨Ù‡Ø§ Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙƒØ«ÙŠØ±Ø©'.",
                'log_image_alert': 'ğŸ“¸ ØªÙ… Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØºØ±ÙØ© Ø±Ù‚Ù… {num}.',
                'report_title_wa': '*ØªÙ‚Ø±ÙŠØ± Ù†Ø¸Ø§ÙØ© ØºØ±ÙØ© Ø±Ù‚Ù… {num}*',
                'report_start_time_wa': 'ğŸ•’ ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡: {time}',
                'report_delay_reason_wa': 'ğŸ›‘ Ø³Ø¨Ø¨ Ø§Ù„ØªØ£Ø®ÙŠØ±: {reason}',
                'report_no_delay_wa': 'âœ… Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ£Ø®ÙŠØ±',
                'report_maint_wa': 'ğŸ› ï¸ Ø§Ù„ØµÙŠØ§Ù†Ø©: {status}. Ø§Ù„ØªÙØ§ØµÙŠÙ„: {details}',
                'report_other_notes_wa': 'ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙØ­Øµ: {notes}',
                'report_no_notes_wa': 'ğŸ“ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙØ­Øµ',
                'report_clean_time_wa': 'ğŸ§¹ ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„ØªÙ†Ø¸ÙŠÙ ÙÙŠ: {time}Ø¯',
                'report_check_time_wa': 'ğŸ” ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„ÙØ­Øµ ÙÙŠ: {time}Ø¯',
                'report_image_link_wa': 'ğŸ”— *Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©:* [ØªÙ… Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ±Ø©]',
                'password_modal_title_reset': 'ØªØµÙÙŠØ© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
                'password_modal_title_log': 'ØªØµÙÙŠØ© Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ù†Ø¬Ø²Ø© (ÙÙ‚Ø·)',
                'password_msg_allow': 'âš ï¸ ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ø³Ø§Ø¹Ø© 1:00 Øµ. Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ù„ØªØµÙÙŠØ© Ø§Ù„ÙŠÙˆÙ….',
                'password_msg_deny': 'ğŸ”’ Ù„Ù… ÙŠØ­Ù† ÙˆÙ‚Øª Ø§Ù„ØªØµÙÙŠØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© (1:00 Øµ). Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ù„ØªØ¬Ø§ÙˆØ² Ø§Ù„Ù‚ÙŠØ¯ Ø§Ù„Ø²Ù…Ù†ÙŠ.',
                'password_msg_log': 'Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ù„ØªØµÙÙŠØ© Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ.',
                'password_placeholder': 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
                'btn_confirm_reset': 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØµÙÙŠØ©',
                'btn_confirm_log_clear': 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØµÙÙŠØ©',
                'toast_data_cleared': 'âœ… ØªÙ… ØªØµÙÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ ÙˆØ¨Ø¯Ø¡ ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯.',
                'toast_log_cleared': 'âœ… ØªÙ… ØªØµÙÙŠØ© Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­.',
                'alert_wrong_password_allowed': 'âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø©. Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØµÙÙŠØ© Ø¥Ù„Ø§ Ø¨ÙƒÙ„Ù…Ø© Ø³Ø± ØµØ­ÙŠØ­Ø© Ø¨Ø¹Ø¯ 1:00 Øµ.',
                'alert_wrong_password_denied': 'âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø©. Ø§Ù„ØªØµÙÙŠØ© Ù…Ø³Ù…ÙˆØ­Ø© ÙÙ‚Ø· Ø¨ÙƒÙ„Ù…Ø© Ø³Ø± ØµØ­ÙŠØ­Ø© Ø£Ùˆ Ø¨Ø¹Ø¯ 1:00 Øµ.',
                'confirm_modal_title': 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡',
                'confirm_modal_message': 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ',
                'confirm_modal_yes': 'Ù†Ø¹Ù…ØŒ Ø£Ø¤ÙƒØ¯',
                'status_time_check_now': 'Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ÙØ­Øµ ØªØ¬Ø±ÙŠ Ø§Ù„Ø¢Ù†',
                'log_in_alert': 'âš ï¸ Ù†Ø²ÙŠÙ„ Ø¯Ø§Ø®Ù„',
                'status_acknowledging': 'Ø§Ù†ØªÙ‚Ø§Ù„',
                'status_cleaning_badge': 'ØªÙ†Ø¸ÙŠÙ',
                'status_checking_live_badge': 'ÙØ­Øµ Ù…Ø¨Ø§Ø´Ø±',
                'status_checking_badge': 'Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙˆØ«ÙŠÙ‚',
                'image_label_before': 'Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© (ØµÙˆØ±Ø© Ù‚Ø¨Ù„):',
                'image_label_after': 'Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© (ØµÙˆØ±Ø© Ø¨Ø¹Ø¯):',
                'default_staff_interface': 'Ù‡Ø°Ù‡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† (Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©).',
                'workers': 'Ø§Ù„Ø¹Ù…Ø§Ù„'
            },
            'en': {
                'abella_system': 'Abella Hotel system',
                'staff_interface': 'Staff interface',
                'tracking_table': 'Room tracking (smart table)',
                'lang_button': 'ğŸŒ Language â–¾',
                'lang_ar': 'Ø¹Ø±Ø¨ÙŠ',
                'lang_en': 'English',
                'lang_ur': 'Ø§Ø±Ø¯Ùˆ',
                'lang_bn': 'à¦¬à¦¾à¦‚à¦²à¦¾',
                'dark_mode_btn': 'ğŸŒ™',
                'developed_by': 'Developed by: Ayman Abu Wardah',
                'offline_mode': 'âš ï¸ Offline mode: Data saved locally',
                'high_pressure': 'âš¡ High pressure mode active',
                'warn_overtime': 'âš ï¸ Warning: Some rooms have exceeded the time limit!',
                'turbo_btn_on': 'Activate Turbo Mode for all Rooms - Seasons or Emergency',
                'turbo_btn_off': 'âš¡ Turbo Mode Active (Cancel)',
                'send_daily_report': 'Send daily manager report ğŸ“',
                'stats_title': 'ğŸ“ˆ Current Performance Stats',
                'reset_btn': 'ğŸ—‘ï¸',
                'fastest_out': 'Fastest Check-Out',
                'fastest_stay': 'Fastest Stay',
                'completed': 'Completed',
                'avg_time': 'Avg. Time',
                'delay': 'Delay',
                'out_rooms': 'Check-Outs',
                'stay_rooms': 'Stays',
                'max_time': 'Max Clean Time',
                'min_time': 'Min Clean Time',
                'rooms_title': 'ğŸšª Room tracking (smart table)',
                'latest_operations': 'ğŸ“‹ Latest completed operations',
                'log_none': 'No operations yet',
                'input_placeholder': 'Room Number',
                'type_select_default': 'Room Status...',
                'type_option_stay': 'ğŸ‘¤ Stay',
                'type_option_out': 'ğŸšª Check-Out',
                'guest_status_default': 'Guest Status...',
                'guest_status_in': 'Guest is Inside',
                'guest_status_out': 'Guest is Outside',
                'btn_start': 'Start',
                'btn_acknowledge': 'Acknowledged & Moving',
                'btn_check': 'âœ… Cleaned (Start Check)',
                'btn_finish_inspection': 'Inspection Complete',
                'btn_document_finish': 'Document & Finish',
                'btn_undo': 'Undo',
                'status_moving': 'Moving',
                'status_cleaning': 'Cleaning',
                'status_checking_live': 'Live Check',
                'status_checking': 'Ready to Document',
                'alert_room_num_type': 'ğŸ”´ Room number and type must be selected.',
                'alert_guest_status': 'ğŸ”´ Guest status (In/Out) must be specified for Stay room.',
                'confirm_start_msg': 'Start cleaning Room {num}?',
                'confirm_acknowledge_msg': 'Acknowledge and move to Room {num}?',
                'confirm_check_msg': 'Start inspection for Room {num}?',
                'confirm_finish_inspection_msg': 'Finish inspection for Room {num}?',
                'toast_start_ack': 'Starting movement to Room {num} ({mode})',
                'toast_start_clean': 'Starting clean for Room {num}',
                'toast_start_check': 'Starting inspection phase',
                'toast_room_documented': 'Room {num} documented and completed',
                'pressure_mode': 'Select Start Mode',
                'pressure_mode_msg': 'What is the pressure mode for this room?',
                'normal_mode': 'Normal Mode (Normal)',
                'room_inspection': 'ğŸ“ Room inspection report',
                'delay_reasons': 'Delay Reason (if any):',
                'none': 'No Delay',
                'busy_reception': 'Busy with front desk',
                'room_many_notes': 'Room has many notes',
                'other_reason': 'Other reason',
                'worker_notes': 'Inspection Notes:',
                'none_notes': 'No Notes',
                'needs_maintenance': 'Needs Maintenance',
                'missing_linens': 'Missing linens',
                'deep_clean': 'Requires deep cleaning',
                'maintenance_details_label': 'Maintenance Details (Required):',
                'maintenance_details_placeholder': 'What items need maintenance?',
                'maintenance_status_label': 'Maintenance Status:',
                'maintenance_status_ongoing': 'Ongoing',
                'maintenance_status_completed': 'Maintenance Completed (Change Image)',
                'status_proof': 'Status proof (optional):',
                'image_camera': 'ğŸ“¸ Open Camera',
                'image_file': 'ğŸ“„ Upload File from Gallery (Image/PDF)',
                'photo_hint': '(Only one file can be selected)',
                'confirm_send': 'Confirm & Submit ğŸš€',
                'cancel': 'Cancel',
                'alert_repair_details': 'ğŸ”´ Required: Must describe items needing maintenance.',
                'alert_image_mandatory': "ğŸ”´ Required: Must attach image when selecting 'Room has many notes/issues'.",
                'log_image_alert': 'ğŸ“¸ Image attached for Room {num} notes.',
                'report_title_wa': '*Room {num} Cleaning Report*',
                'report_start_time_wa': 'ğŸ•’ Start Time: {time}',
                'report_delay_reason_wa': 'ğŸ›‘ Delay Reason: {reason}',
                'report_no_delay_wa': 'âœ… No Delay',
                'report_maint_wa': 'ğŸ› ï¸ Maintenance: {status}. Details: {details}',
                'report_other_notes_wa': 'ğŸ“ Inspection Notes: {notes}',
                'report_no_notes_wa': 'ğŸ“ No Inspection Notes',
                'report_clean_time_wa': 'ğŸ§¹ Cleaning Finished in: {time}min',
                'report_check_time_wa': 'ğŸ” Inspection Finished in: {time}min',
                'report_image_link_wa': 'ğŸ”— *Image Link:* [Image Attached]',
                'password_modal_title_reset': 'Complete Data Wipe',
                'password_modal_title_log': 'Clear Completed Log (Only)',
                'password_msg_allow': 'âš ï¸ Past 1:00 AM. Enter admin password to clear the day.',
                'password_msg_deny': 'ğŸ”’ Not time for auto-clear (1:00 AM). Enter password to override time restriction.',
                'password_msg_log': 'Enter admin password to clear the current log.',
                'password_placeholder': 'Password',
                'btn_confirm_reset': 'Confirm Wipe',
                'btn_confirm_log_clear': 'Confirm Clear',
                'toast_data_cleared': 'âœ… Data successfully wiped and new day started.',
                'toast_log_cleared': 'âœ… Operation log successfully cleared.',
                'alert_wrong_password_allowed': 'âŒ Incorrect password. Cannot wipe unless correct password entered after 1:00 AM.',
                'alert_wrong_password_denied': 'âŒ Incorrect password. Clearing allowed only with correct password or after 1:00 AM.',
                'confirm_modal_title': 'Confirm Action',
                'confirm_modal_message': 'Are you sure you want to proceed?',
                'confirm_modal_yes': 'Yes, Confirm',
                'status_time_check_now': 'Inspection in Progress',
                'log_in_alert': 'âš ï¸ Guest Inside',
                'status_acknowledging': 'Moving',
                'status_cleaning_badge': 'Cleaning',
                'status_checking_live_badge': 'Live Check',
                'status_checking_badge': 'Ready to Document',
                'image_label_before': 'Condition Proof (Before Image):',
                'image_label_after': 'Condition Proof (After Image):',
                'default_staff_interface': 'This is the staff interface (default).',
                'workers': 'Workers'
            },
            'ur': { // --------------------- Urdu Data (lang-ur.json) ---------------------
                'abella_system': 'Ø§Ø¨ÛŒÙ„Ø§ ÛÙˆÙ¹Ù„ Ø³Ø³Ù¹Ù…',
                'staff_interface': 'Ø§Ø³Ù¹Ø§Ù Ø§Ù†Ù¹Ø±ÙÛŒØ³',
                'tracking_table': 'Ø±ÙˆÙ… Ù¹Ø±ÛŒÚ©Ù†Ú¯ (Ø³Ù…Ø§Ø±Ù¹ Ù¹ÛŒØ¨Ù„)',
                'lang_button': 'ğŸŒ Ø§Ù„Ù„ØºØ© â–¾',
                'lang_ar': 'Ø¹Ø±Ø¨ÙŠ',
                'lang_en': 'English',
                'lang_ur': 'Ø§Ø±Ø¯Ùˆ',
                'lang_bn': 'à¦¬à¦¾à¦‚à¦²à¦¾',
                'dark_mode_btn': 'ğŸŒ™',
                'developed_by': 'ØªØ±Ù‚ÛŒ: Ø§ÛŒÙ…Ù† Ø§Ø¨Ùˆ ÙˆØ±Ø¯Û',
                'offline_mode': 'âš ï¸ Ø¢Ù Ù„Ø§Ø¦Ù† Ù…ÙˆÚˆ: ÚˆÛŒÙ¹Ø§ Ù…Ù‚Ø§Ù…ÛŒ Ø·ÙˆØ± Ù¾Ø± Ù…Ø­ÙÙˆØ¸ ÛÛ’',
                'high_pressure': 'âš¡ ÛØ§Ø¦ÛŒ Ù¾Ø±ÛŒØ´Ø± Ù…ÙˆÚˆ ÙØ¹Ø§Ù„',
                'warn_overtime': 'âš ï¸ Ø®Ø¨Ø±Ø¯Ø§Ø±: Ú©Ú†Ú¾ Ú©Ù…Ø±Û’ ÙˆÙ‚Øª Ú©ÛŒ Ø­Ø¯ Ø³Û’ ØªØ¬Ø§ÙˆØ² Ú©Ø± Ú¯Ø¦Û’ ÛÛŒÚº!',
                'turbo_btn_on': 'ØªÙ…Ø§Ù… Ú©Ù…Ø±ÙˆÚº Ú©Û’ Ù„ÛŒÛ’ Ù¹Ø±Ø¨Ùˆ Ù…ÙˆÚˆ ÙØ¹Ø§Ù„ Ú©Ø±ÛŒÚº - Ø³ÛŒØ²Ù† ÛŒØ§ Ø§ÛŒÙ…Ø±Ø¬Ù†Ø³ÛŒ',
                'turbo_btn_off': 'âš¡ Ù¹Ø±Ø¨Ùˆ Ù…ÙˆÚˆ ÙØ¹Ø§Ù„ (Ù…Ù†Ø³ÙˆØ® Ú©Ø±ÛŒÚº)',
                'send_daily_report': 'Ø±ÙˆØ²Ø§Ù†Û Ù…ÛŒÙ†ÛŒØ¬Ø± Ø±Ù¾ÙˆØ±Ù¹ Ø¨Ú¾ÛŒØ¬ÛŒÚº ğŸ“',
                'stats_title': 'ğŸ“ˆ Ù…ÙˆØ¬ÙˆØ¯Û Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ Ú©Û’ Ø§Ø¹Ø¯Ø§Ø¯ Ùˆ Ø´Ù…Ø§Ø±',
                'reset_btn': 'ğŸ—‘ï¸',
                'fastest_out': 'ØªÛŒØ² ØªØ±ÛŒÙ† Ú†ÛŒÚ© Ø¢Ø¤Ù¹',
                'fastest_stay': 'ØªÛŒØ² ØªØ±ÛŒÙ† Ù¹Ú¾ÛØ±Ù†Ø§',
                'completed': 'Ù…Ú©Ù…Ù„',
                'avg_time': 'Ø§ÙˆØ³Ø· ÙˆÙ‚Øª',
                'delay': 'ØªØ§Ø®ÛŒØ±',
                'out_rooms': 'Ú†ÛŒÚ© Ø¢Ø¤Ù¹',
                'stay_rooms': 'Ù¹Ú¾ÛØ±Ù†Ø§',
                'max_time': 'Ø²ÛŒØ§Ø¯Û Ø³Û’ Ø²ÛŒØ§Ø¯Û ØµÙØ§Ø¦ÛŒ Ú©Ø§ ÙˆÙ‚Øª',
                'min_time': 'Ú©Ù… Ø³Û’ Ú©Ù… ØµÙØ§Ø¦ÛŒ Ú©Ø§ ÙˆÙ‚Øª',
                'rooms_title': 'ğŸšª Ø±ÙˆÙ… Ù¹Ø±ÛŒÚ©Ù†Ú¯ (Ø³Ù…Ø§Ø±Ù¹ Ù¹ÛŒØ¨Ù„)',
                'latest_operations': 'ğŸ“‹ ØªØ§Ø²Û ØªØ±ÛŒÙ† Ù…Ú©Ù…Ù„ Ø´Ø¯Û Ø¢Ù¾Ø±ÛŒØ´Ù†Ø²',
                'log_none': 'Ú©ÙˆØ¦ÛŒ Ø¢Ù¾Ø±ÛŒØ´Ù†Ø² Ù†ÛÛŒÚº',
                'input_placeholder': 'Ú©Ù…Ø±Û’ Ú©Ø§ Ù†Ù…Ø¨Ø±',
                'type_select_default': 'Ú©Ù…Ø±Û’ Ú©ÛŒ Ø­Ø§Ù„Øª...',
                'type_option_stay': 'ğŸ‘¤ Ù¹Ú¾ÛØ±Ù†Ø§',
                'type_option_out': 'ğŸšª Ú†ÛŒÚ© Ø¢Ø¤Ù¹',
                'guest_status_default': 'Ù…ÛÙ…Ø§Ù† Ú©ÛŒ Ø­Ø§Ù„Øª...',
                'guest_status_in': 'Ù…ÛÙ…Ø§Ù† Ø§Ù†Ø¯Ø± ÛÛ’',
                'guest_status_out': 'Ù…ÛÙ…Ø§Ù† Ø¨Ø§ÛØ± ÛÛ’',
                'btn_start': 'Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº',
                'btn_acknowledge': 'ØªØ³Ù„ÛŒÙ… Ø´Ø¯Û Ø§ÙˆØ± Ù…Ù†ØªÙ‚Ù„ ÛÙˆ Ø±ÛÛ’ ÛÛŒÚº',
                'btn_check': 'âœ… ØµØ§Ù ÛÙˆ Ú¯ÛŒØ§ (Ú†ÛŒÚ© Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº)',
                'btn_finish_inspection': 'Ù…Ø¹Ø§Ø¦Ù†Û Ù…Ú©Ù…Ù„',
                'btn_document_finish': 'Ø¯Ø³ØªØ§ÙˆÛŒØ² Ø§ÙˆØ± Ù…Ú©Ù…Ù„ Ú©Ø±ÛŒÚº',
                'btn_undo': 'Ø§Ù†ÚˆÙˆ Ú©Ø±ÛŒÚº',
                'status_moving': 'Ù…Ù†ØªÙ‚Ù„ ÛÙˆ Ø±ÛØ§ ÛÛ’',
                'status_cleaning': 'ØµÙØ§Ø¦ÛŒ',
                'status_checking_live': 'Ù„Ø§Ø¦ÛŒÙˆ Ú†ÛŒÚ©',
                'status_checking': 'Ø¯Ø³ØªØ§ÙˆÛŒØ² Ú©Û’ Ù„ÛŒÛ’ ØªÛŒØ§Ø±',
                'alert_room_num_type': 'ğŸ”´ Ú©Ù…Ø±Û’ Ú©Ø§ Ù†Ù…Ø¨Ø± Ø§ÙˆØ± Ù‚Ø³Ù… Ù…Ù†ØªØ®Ø¨ Ú©Ø±Ù†Ø§ Ø¶Ø±ÙˆØ±ÛŒ ÛÛ’Û”',
                'alert_guest_status': 'ğŸ”´ Ù¹Ú¾ÛØ±Ù†Û’ ÙˆØ§Ù„Û’ Ú©Ù…Ø±Û’ Ú©Û’ Ù„ÛŒÛ’ Ù…ÛÙ…Ø§Ù† Ú©ÛŒ Ø­Ø§Ù„Øª (Ø§Ù†Ø¯Ø±/Ø¨Ø§ÛØ±) Ú©ÛŒ ÙˆØ¶Ø§Ø­Øª Ø¶Ø±ÙˆØ±ÛŒ ÛÛ’Û”',
                'confirm_start_msg': 'ØµÙØ§Ø¦ÛŒ Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº Ú©Ù…Ø±Û {num}ØŸ',
                'confirm_acknowledge_msg': 'ØªØ³Ù„ÛŒÙ… Ú©Ø±ÛŒÚº Ø§ÙˆØ± Ú©Ù…Ø±Û {num} Ú©ÛŒ Ø·Ø±Ù Ù…Ù†ØªÙ‚Ù„ ÛÙˆÚºØŸ',
                'confirm_check_msg': 'Ú©Ù…Ø±Û {num} Ú©Ø§ Ù…Ø¹Ø§Ø¦Ù†Û Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚºØŸ',
                'confirm_finish_inspection_msg': 'Ú©Ù…Ø±Û {num} Ú©Ø§ Ù…Ø¹Ø§Ø¦Ù†Û Ù…Ú©Ù…Ù„ Ú©Ø±ÛŒÚºØŸ',
                'toast_start_ack': 'Ú©Ù…Ø±Û {num} ({mode}) Ú©ÛŒ Ø·Ø±Ù Ù…Ù†ØªÙ‚Ù„ÛŒ Ø´Ø±ÙˆØ¹ Ú©Ø± Ø±ÛØ§ ÛÛ’',
                'toast_start_clean': 'Ú©Ù…Ø±Û {num} Ú©ÛŒ ØµÙØ§Ø¦ÛŒ Ø´Ø±ÙˆØ¹ Ú©Ø± Ø±ÛØ§ ÛÛ’',
                'toast_start_check': 'Ù…Ø¹Ø§Ø¦Ù†Û Ú©Ø§ Ù…Ø±Ø­Ù„Û Ø´Ø±ÙˆØ¹ Ú©Ø± Ø±ÛØ§ ÛÛ’',
                'toast_room_documented': 'Ú©Ù…Ø±Û {num} Ø¯Ø³ØªØ§ÙˆÛŒØ² ÛÙˆ Ú¯ÛŒØ§ Ø§ÙˆØ± Ù…Ú©Ù…Ù„ ÛÙˆ Ú¯ÛŒØ§',
                'pressure_mode': 'Ø´Ø±ÙˆØ¹ Ú©Ø±Ù†Û’ Ú©Ø§ Ù…ÙˆÚˆ Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº',
                'pressure_mode_msg': 'Ø§Ø³ Ú©Ù…Ø±Û’ Ú©Û’ Ù„ÛŒÛ’ Ù¾Ø±ÛŒØ´Ø± Ù…ÙˆÚˆ Ú©ÛŒØ§ ÛÛ’ØŸ',
                'normal_mode': 'Ù†Ø§Ø±Ù…Ù„ Ù…ÙˆÚˆ (Ù†Ø§Ø±Ù…Ù„)',
                'room_inspection': 'ğŸ“ Ú©Ù…Ø±Û’ Ú©Ø§ Ù…Ø¹Ø§Ø¦Ù†Û Ø±Ù¾ÙˆØ±Ù¹',
                'delay_reasons': 'ØªØ§Ø®ÛŒØ± Ú©ÛŒ ÙˆØ¬ÙˆÛØ§Øª Ú©ÛŒ ÙÛØ±Ø³Øª:',
                'none': 'Ú©ÙˆØ¦ÛŒ ØªØ§Ø®ÛŒØ± Ù†ÛÛŒÚº',
                'busy_reception': 'Ø±ÛŒØ³Ù¾Ø´Ù† Ù…ÛŒÚº Ù…ØµØ±ÙˆÙ',
                'room_many_notes': 'Ú©Ù…Ø±Û’ Ù…ÛŒÚº Ù…ØªØ¹Ø¯Ø¯ Ù†ÙˆÙ¹Ø³ Ù…ÙˆØ¬ÙˆØ¯ ÛÛŒÚº',
                'other_reason': 'Ø¯ÙˆØ³Ø±Ø§ Ø³Ø¨Ø¨',
                'worker_notes': 'Ù…Ø¹Ø§Ø¦Ù†Û Ú©Û’ Ù†ÙˆÙ¹Ø³:',
                'none_notes': 'Ú©ÙˆØ¦ÛŒ Ù†ÙˆÙ¹Ø³ Ù†ÛÛŒÚº',
                'needs_maintenance': 'Ù…Ø±Ù…Øª Ú©ÛŒ Ø¶Ø±ÙˆØ±Øª ÛÛ’',
                'missing_linens': 'Ú†Ø§Ø¯Ø±ÙˆÚº Ú©ÛŒ Ú©Ù…ÛŒ',
                'deep_clean': 'Ú¯ÛØ±ÛŒ ØµÙØ§Ø¦ÛŒ Ø¯Ø±Ú©Ø§Ø± ÛÛ’',
                'maintenance_details_label': 'Ù…Ø±Ù…Øª Ú©ÛŒ ØªÙØµÛŒÙ„Ø§Øª (Ø¶Ø±ÙˆØ±ÛŒ):',
                'maintenance_details_placeholder': 'Ú©Ù† Ú†ÛŒØ²ÙˆÚº Ú©Ùˆ Ù…Ø±Ù…Øª Ú©ÛŒ Ø¶Ø±ÙˆØ±Øª ÛÛ’ØŸ',
                'maintenance_status_label': 'Ù…Ø±Ù…Øª Ú©ÛŒ Ø­Ø§Ù„Øª:',
                'maintenance_status_ongoing': 'Ø¬Ø§Ø±ÛŒ ÛÛ’',
                'maintenance_status_completed': 'Ù…Ø±Ù…Øª Ù…Ú©Ù…Ù„ (ØªØµÙˆÛŒØ± ØªØ¨Ø¯ÛŒÙ„ Ú©Ø±ÛŒÚº)',
                'status_proof': 'Ø­Ø§Ù„Øª Ú©Ø§ Ø«Ø¨ÙˆØª (Ø§Ø®ØªÛŒØ§Ø±ÛŒ):',
                'image_camera': 'ğŸ“¸ Ú©ÛŒÙ…Ø±Û Ú©Ú¾ÙˆÙ„ÛŒÚº',
                'image_file': 'ğŸ“„ Ú¯ÛŒÙ„Ø±ÛŒ Ø³Û’ ÙØ§Ø¦Ù„ Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº (ØªØµÙˆÛŒØ±/Ù¾ÛŒ ÚˆÛŒ Ø§ÛŒÙ)',
                'photo_hint': '(ØµØ±Ù Ø§ÛŒÚ© ÙØ§Ø¦Ù„ Ù…Ù†ØªØ®Ø¨ Ú©ÛŒ Ø¬Ø§ Ø³Ú©ØªÛŒ ÛÛ’)',
                'confirm_send': 'ØªØµØ¯ÛŒÙ‚ Ú©Ø±ÛŒÚº Ø§ÙˆØ± Ø¨Ú¾ÛŒØ¬ÛŒÚº ğŸš€',
                'cancel': 'Ù…Ù†Ø³ÙˆØ® Ú©Ø±ÛŒÚº',
                'alert_repair_details': 'ğŸ”´ Ø¶Ø±ÙˆØ±ÛŒ: Ù…Ø±Ù…Øª Ú©ÛŒ Ø¶Ø±ÙˆØ±Øª ÙˆØ§Ù„ÛŒ Ú†ÛŒØ²ÙˆÚº Ú©ÛŒ ÙˆØ¶Ø§Ø­Øª Ø¶Ø±ÙˆØ±ÛŒ ÛÛ’Û”',
                'alert_image_mandatory': "ğŸ”´ Ø¶Ø±ÙˆØ±ÛŒ: 'Ú©Ù…Ø±Û’ Ù…ÛŒÚº Ù…ØªØ¹Ø¯Ø¯ Ù†ÙˆÙ¹Ø³ Ù…ÙˆØ¬ÙˆØ¯ ÛÛŒÚº' Ù…Ù†ØªØ®Ø¨ Ú©Ø±Ù†Û’ Ù¾Ø± ØªØµÙˆÛŒØ± Ù…Ù†Ø³Ù„Ú© Ú©Ø±Ù†Ø§ Ø¶Ø±ÙˆØ±ÛŒ ÛÛ’Û”",
                'log_image_alert': 'ğŸ“¸ Ú©Ù…Ø±Û {num} Ú©Û’ Ù†ÙˆÙ¹Ø³ Ú©Û’ Ù„ÛŒÛ’ ØªØµÙˆÛŒØ± Ù…Ù†Ø³Ù„Ú© Ú©ÛŒ Ú¯Ø¦ÛŒ ÛÛ’Û”',
                'report_title_wa': '*Ú©Ù…Ø±Û {num} ØµÙØ§Ø¦ÛŒ Ø±Ù¾ÙˆØ±Ù¹*',
                'report_start_time_wa': 'ğŸ•’ Ø´Ø±ÙˆØ¹ ÛÙˆÙ†Û’ Ú©Ø§ ÙˆÙ‚Øª: {time}',
                'report_delay_reason_wa': 'ğŸ›‘ ØªØ§Ø®ÛŒØ± Ú©ÛŒ ÙˆØ¬Û: {reason}',
                'report_no_delay_wa': 'âœ… Ú©ÙˆØ¦ÛŒ ØªØ§Ø®ÛŒØ± Ù†ÛÛŒÚº',
                'report_maint_wa': 'ğŸ› ï¸ Ù…Ø±Ù…Øª: {status}. ØªÙØµÛŒÙ„Ø§Øª: {details}',
                'report_other_notes_wa': 'ğŸ“ Ù…Ø¹Ø§Ø¦Ù†Û Ú©Û’ Ù†ÙˆÙ¹Ø³: {notes}',
                'report_no_notes_wa': 'ğŸ“ Ú©ÙˆØ¦ÛŒ Ù…Ø¹Ø§Ø¦Ù†Û Ù†ÙˆÙ¹Ø³ Ù†ÛÛŒÚº',
                'report_clean_time_wa': 'ğŸ§¹ ØµÙØ§Ø¦ÛŒ Ù…Ú©Ù…Ù„ ÛÙˆØ¦ÛŒ: {time}Ù…Ù†Ù¹ Ù…ÛŒÚº',
                'report_check_time_wa': 'ğŸ” Ù…Ø¹Ø§Ø¦Ù†Û Ù…Ú©Ù…Ù„ ÛÙˆØ§: {time}Ù…Ù†Ù¹ Ù…ÛŒÚº',
                'report_image_link_wa': 'ğŸ”— *ØªØµÙˆÛŒØ± Ú©Ø§ Ù„Ù†Ú©:* [ØªØµÙˆÛŒØ± Ù…Ù†Ø³Ù„Ú©]',
                'password_modal_title_reset': 'Ù…Ú©Ù…Ù„ ÚˆÛŒÙ¹Ø§ Ø®ØªÙ… Ú©Ø±ÛŒÚº',
                'password_modal_title_log': 'Ù…Ú©Ù…Ù„ Ø´Ø¯Û Ù„Ø§Ú¯ ØµØ±Ù Ø®ØªÙ… Ú©Ø±ÛŒÚº',
                'password_msg_allow': 'âš ï¸ ØµØ¨Ø­ 1:00 Ø¨Ø¬Û’ Ú©Û’ Ø¨Ø¹Ø¯. Ø¯Ù† Ø®ØªÙ… Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ø§ÛŒÚˆÙ…Ù† Ù¾Ø§Ø³ ÙˆØ±Úˆ Ø¯Ø±Ø¬ Ú©Ø±ÛŒÚºÛ”',
                'password_msg_deny': 'ğŸ”’ Ø®ÙˆØ¯Ú©Ø§Ø± Ø®ØªÙ… Ú©Ø±Ù†Û’ Ú©Ø§ ÙˆÙ‚Øª Ù†ÛÛŒÚº ÛÙˆØ§ (ØµØ¨Ø­ 1:00 Ø¨Ø¬Û’). ÙˆÙ‚Øª Ú©ÛŒ Ù¾Ø§Ø¨Ù†Ø¯ÛŒ Ú©Ùˆ Ù†Ø¸Ø±Ø§Ù†Ø¯Ø§Ø² Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ù¾Ø§Ø³ ÙˆØ±Úˆ Ø¯Ø±Ø¬ Ú©Ø±ÛŒÚºÛ”',
                'password_msg_log': 'Ù…ÙˆØ¬ÙˆØ¯Û Ù„Ø§Ú¯ Ø®ØªÙ… Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ø§ÛŒÚˆÙ…Ù† Ù¾Ø§Ø³ ÙˆØ±Úˆ Ø¯Ø±Ø¬ Ú©Ø±ÛŒÚºÛ”',
                'password_placeholder': 'Ù¾Ø§Ø³ ÙˆØ±Úˆ',
                'btn_confirm_reset': 'Ø®ØªÙ… Ú©Ø±Ù†Û’ Ú©ÛŒ ØªØµØ¯ÛŒÙ‚ Ú©Ø±ÛŒÚº',
                'btn_confirm_log_clear': 'Ø®ØªÙ… Ú©Ø±Ù†Û’ Ú©ÛŒ ØªØµØ¯ÙŠÙ‚ Ú©Ø±ÛŒÚº',
                'toast_data_cleared': 'âœ… ÚˆÛŒÙ¹Ø§ Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ø³Û’ Ø®ØªÙ… ÛÙˆ Ú¯ÛŒØ§ Ø§ÙˆØ± Ù†ÛŒØ§ Ø¯Ù† Ø´Ø±ÙˆØ¹ ÛÙˆ Ú¯ÛŒØ§ ÛÛ’Û”',
                'toast_log_cleared': 'âœ… Ø¢Ù¾Ø±ÛŒØ´Ù† Ù„Ø§Ú¯ Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ø³Û’ Ø®ØªÙ… ÛÙˆ Ú¯ÛŒØ§ ÛÛ’Û”',
                'alert_wrong_password_allowed': 'âŒ ØºÙ„Ø· Ù¾Ø§Ø³ ÙˆØ±Úˆ. ØµØ¨Ø­ 1:00 Ø¨Ø¬Û’ Ú©Û’ Ø¨Ø¹Ø¯ Ø¯Ø±Ø³Øª Ù¾Ø§Ø³ ÙˆØ±Úˆ Ø¯Ø±Ø¬ Ú©ÛŒÛ’ Ø¨ØºÛŒØ± Ø®ØªÙ… Ù†ÛÛŒÚº Ú©ÛŒØ§ Ø¬Ø§ Ø³Ú©ØªØ§Û”',
                'alert_wrong_password_denied': 'âŒ ØºÙ„Ø· Ù¾Ø§Ø³ ÙˆØ±Úˆ. Ø®ØªÙ… Ú©Ø±Ù†Û’ Ú©ÛŒ Ø§Ø¬Ø§Ø²Øª ØµØ±Ù Ø¯Ø±Ø³Øª Ù¾Ø§Ø³ ÙˆØ±Úˆ Ú©Û’ Ø³Ø§ØªÚ¾ Ø£Ùˆ ØµØ¨Ø­ 1:00 Ø¨Ø¬Û’ Ú©Û’ Ø¨Ø¹Ø¯ ÛÛ’Û”',
                'confirm_modal_title': 'ÙƒØ§Ø±Ø±ÙˆØ§Ø¦ÙŠ Ú©ÛŒ ØªØµØ¯ÙŠÙ‚ Ú©Ø±ÛŒÚº',
                'confirm_modal_message': 'Ú©ÛŒØ§ Ø¢Ù¾ Ø¢Ú¯Û’ Ø¨Ú‘Ú¾Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ ÛŒÙ‚ÛŒÙ†ÛŒ ÛÛŒÚºØŸ',
                'confirm_modal_yes': 'ÛØ§ÚºØŒ ØªØµØ¯ÙŠÙ‚ Ú©Ø±ÛŒÚº',
                'status_time_check_now': 'Ù…Ø¹Ø§Ø¦Ù†Û Ø¬Ø§Ø±ÛŒ ÛÛ’',
                'log_in_alert': 'âš ï¸ Ù…ÛÙ…Ø§Ù† Ø§Ù†Ø¯Ø± ÛÛ’',
                'status_acknowledging': 'Ù…Ù†ØªÙ‚Ù„ ÛÙˆ Ø±ÛØ§ ÛÛ’',
                'status_cleaning_badge': 'ØµÙØ§Ø¦ÛŒ',
                'status_checking_live_badge': 'Ù„Ø§Ø¦ÛŒÙˆ Ú†ÛŒÚ©',
                'status_checking_badge': 'Ø¯Ø³ØªØ§ÙˆÛŒØ² Ú©Û’ Ù„ÛŒÛ’ ØªÛŒØ§Ø±',
                'image_label_before': 'Ø­Ø§Ù„Øª Ú©Ø§ Ø«Ø¨ÙˆØª (Ù¾ÛÙ„Û’ Ú©ÛŒ ØªØµÙˆÛŒØ±):',
                'image_label_after': 'Ø­Ø§Ù„Øª Ú©Ø§ Ø«Ø¨ÙˆØª (Ø¨Ø¹Ø¯ Ú©ÛŒ ØªØµÙˆÛŒØ±):',
                'default_staff_interface': 'ÛŒÛ Ø§Ø³Ù¹Ø§Ù Ø§Ù†Ù¹Ø±ÙÛŒØ³ ÛÛ’ (ÚˆÛŒÙØ§Ù„Ù¹).',
                'workers': 'Ù…Ù„Ø§Ø²Ù…ÛŒÙ†'
            },
            'bn': { // --------------------- Bengali Data (lang-bn.json) ---------------------
                'abella_system': 'à¦…à§à¦¯à¦¾à¦¬à§‡à¦²à¦¾ à¦¹à§‹à¦Ÿà§‡à¦² à¦¸à¦¿à¦¸à§à¦Ÿà§‡à¦®',
                'staff_interface': 'à¦¸à§à¦Ÿà¦¾à¦« à¦‡à¦¨à§à¦Ÿà¦¾à¦°à¦«à§‡à¦¸',
                'tracking_table': 'à¦°à§à¦® à¦Ÿà§à¦°à§à¦¯à¦¾à¦•à¦¿à¦‚ (à¦¸à§à¦®à¦¾à¦°à§à¦Ÿ à¦Ÿà§‡à¦¬à¦¿à¦²)',
                'lang_button': 'ğŸŒ à¦­à¦¾à¦·à¦¾ â–¾',
                'lang_ar': 'Ø¹Ø±Ø¨ÙŠ',
                'lang_en': 'English',
                'lang_ur': 'Ø§Ø±Ø¯Ùˆ',
                'lang_bn': 'à¦¬à¦¾à¦‚à¦²à¦¾',
                'dark_mode_btn': 'ğŸŒ™',
                'developed_by': 'à¦‰à¦¨à§à¦¨à¦¯à¦¼à¦¨: à¦†à¦‡à¦®à¦¨ à¦†à¦¬à§ à¦“à¦¯à¦¼à¦¾à¦°à¦¦à¦¾à¦¹',
                'offline_mode': 'âš ï¸ à¦…à¦«à¦²à¦¾à¦‡à¦¨ à¦®à§‹à¦¡: à¦¡à§‡à¦Ÿà¦¾ à¦²à§‹à¦•à¦¾à¦²à¦¿ à¦¸à¦‚à¦°à¦•à§à¦·à¦¿à¦¤',
                'high_pressure': 'âš¡ à¦‰à¦šà§à¦š à¦šà¦¾à¦ª à¦®à§‹à¦¡ à¦¸à¦•à§à¦°à¦¿à¦¯à¦¼',
                'warn_overtime': 'âš ï¸ à¦¸à¦¤à¦°à§à¦•à¦¤à¦¾: à¦•à¦¿à¦›à§ à¦°à§à¦® à¦¸à¦®à¦¯à¦¼à¦¸à§€à¦®à¦¾ à¦…à¦¤à¦¿à¦•à§à¦°à¦® à¦•à¦°à§‡à¦›à§‡!',
                'turbo_btn_on': 'à¦¸à¦®à¦¸à§à¦¤ à¦°à§à¦®à§‡à¦° à¦œà¦¨à§à¦¯ à¦Ÿà¦¾à¦°à§à¦¬à§‹ à¦®à§‹à¦¡ à¦¸à¦•à§à¦°à¦¿à¦¯à¦¼ à¦•à¦°à§à¦¨ - à¦¸à¦¿à¦œà¦¨ à¦¬à¦¾ à¦œà¦°à§à¦°à¦¿ à¦…à¦¬à¦¸à§à¦¥à¦¾',
                'turbo_btn_off': 'âš¡ à¦‰à¦šà§à¦š à¦šà¦¾à¦ª à¦®à§‹à¦¡ à¦¸à¦•à§à¦°à¦¿à¦¯à¦¼ (à¦¬à¦¾à¦¤à¦¿à¦²)',
                'send_daily_report': 'à¦¦à§ˆà¦¨à¦¿à¦• à¦®à§à¦¯à¦¾à¦¨à§‡à¦œà¦¾à¦° à¦°à¦¿à¦ªà§‹à¦°à§à¦Ÿ à¦ªà¦¾à¦ à¦¾à¦¨ ğŸ“',
                'stats_title': 'ğŸ“ˆ à¦¬à¦°à§à¦¤à¦®à¦¾à¦¨ à¦•à¦°à§à¦®à¦•à§à¦·à¦®à¦¤à¦¾ à¦ªà¦°à¦¿à¦¸à¦‚à¦–à§à¦¯à¦¾à¦¨',
                'reset_btn': 'ğŸ—‘ï¸',
                'fastest_out': 'à¦¦à§à¦°à§à¦¤à¦¤à¦® à¦šà§‡à¦•-à¦†à¦‰à¦Ÿ',
                'fastest_stay': 'à¦¦à§à¦°à§à¦¤à¦¤à¦® à¦…à¦¬à¦¸à§à¦¥à¦¾à¦¨',
                'completed': 'à¦¸à¦®à§à¦ªà¦¨à§à¦¨',
                'avg_time': 'à¦—à¦¡à¦¼ à¦¸à¦®à¦¯à¦¼',
                'delay': 'à¦¦à§‡à¦°à¦¿',
                'out_rooms': 'à¦šà§‡à¦•-à¦†à¦‰à¦Ÿ',
                'stay_rooms': 'à¦…à¦¬à¦¸à§à¦¥à¦¾à¦¨',
                'max_time': 'à¦¸à¦°à§à¦¬à§‹à¦šà§à¦š à¦ªà¦°à¦¿à¦¸à§à¦•à¦¾à¦° à¦¸à¦®à¦¯à¦¼',
                'min_time': 'à¦¸à¦°à§à¦¬à¦¨à¦¿à¦®à§à¦¨ à¦ªà¦°à¦¿à¦¸à§à¦•à¦¾à¦° à¦¸à¦®à¦¯à¦¼',
                'rooms_title': 'ğŸšª à¦°à§à¦® à¦Ÿà§à¦°à§à¦¯à¦¾à¦•à¦¿à¦‚ (à¦¸à§à¦®à¦¾à¦°à§à¦Ÿ à¦Ÿà§‡à¦¬à¦¿à¦²)',
                'latest_operations': 'ğŸ“‹ à¦¸à¦¾à¦®à§à¦ªà§à¦°à¦¤à¦¿à¦• à¦¸à¦®à§à¦ªà¦¨à§à¦¨ à¦•à¦¾à¦°à§à¦¯à¦•à§à¦°à¦®',
                'log_none': 'à¦•à§‹à¦¨à§‹ à¦•à¦¾à¦°à§à¦¯à¦•à§à¦°à¦® à¦¨à§‡à¦‡',
                'input_placeholder': 'à¦°à§à¦® à¦¨à¦®à§à¦¬à¦°',
                'type_select_default': 'à¦°à§à¦®à§‡à¦° à¦…à¦¬à¦¸à§à¦¥à¦¾...',
                'type_option_stay': 'ğŸ‘¤ à¦…à¦¬à¦¸à§à¦¥à¦¾à¦¨',
                'type_option_out': 'ğŸšª à¦šà§‡à¦•-à¦†à¦‰à¦Ÿ',
                'guest_status_default': 'à¦…à¦¤à¦¿à¦¥à¦¿à¦° à¦…à¦¬à¦¸à§à¦¥à¦¾...',
                'guest_status_in': 'à¦…à¦¤à¦¿à¦¥à¦¿ à¦­à§‡à¦¤à¦°à§‡ à¦†à¦›à§‡à¦¨',
                'guest_status_out': 'à¦…à¦¤à¦¿à¦¥à¦¿ à¦¬à¦¾à¦‡à¦°à§‡ à¦†à¦›à§‡à¦¨',
                'btn_start': 'à¦¶à§à¦°à§ à¦•à¦°à§à¦¨',
                'btn_acknowledge': 'à¦¸à§à¦¬à§€à¦•à§ƒà¦¤ à¦à¦¬à¦‚ à¦¸à§à¦¥à¦¾à¦¨à¦¾à¦¨à§à¦¤à¦°à¦¿à¦¤ à¦¹à¦šà§à¦›à§‡',
                'btn_check': 'âœ… à¦ªà¦°à¦¿à¦·à§à¦•à¦¾à¦° à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡ (à¦šà§‡à¦• à¦¶à§à¦°à§ à¦•à¦°à§à¦¨)',
                'btn_finish_inspection': 'à¦ªà¦°à¦¿à¦¦à¦°à§à¦¶à¦¨ à¦¸à¦®à§à¦ªà§‚à¦°à§à¦£',
                'btn_document_finish': 'à¦¡à¦•à§à¦®à§‡à¦¨à§à¦Ÿ à¦“ à¦¸à¦®à§à¦ªà¦¨à§à¦¨ à¦•à¦°à§à¦¨',
                'btn_undo': 'à¦†à¦—à§‡à¦° à¦…à¦¬à¦¸à§à¦¥à¦¾à¦¯à¦¼ à¦¯à¦¾à¦¨',
                'status_moving': 'à¦¸à§à¦¥à¦¾à¦¨à¦¾à¦¨à§à¦¤à¦°à¦¿à¦¤ à¦¹à¦šà§à¦›à§‡',
                'status_cleaning': 'à¦ªà¦°à¦¿à¦·à§à¦•à¦¾à¦° à¦•à¦°à¦¾ à¦¹à¦šà§à¦›à§‡',
                'status_checking_live': 'à¦²à¦¾à¦‡à¦­ à¦šà§‡à¦•',
                'status_checking': 'à¦¡à¦•à§à¦®à§‡à¦¨à§à¦Ÿà§‡à¦° à¦œà¦¨à§à¦¯ à¦ªà§à¦°à¦¸à§à¦¤à§à¦¤',
                'alert_room_num_type': 'ğŸ”´ à¦°à§à¦® à¦¨à¦®à§à¦¬à¦° à¦à¦¬à¦‚ à¦ªà§à¦°à¦•à¦¾à¦° à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à¦¤à§‡ à¦¹à¦¬à§‡à¥¤',
                'alert_guest_status': 'ğŸ”´ à¦…à¦¬à¦¸à§à¦¥à¦¾à¦¨à§‡à¦° à¦œà¦¨à§à¦¯ à¦…à¦¤à¦¿à¦¥à¦¿à¦° à¦…à¦¬à¦¸à§à¦¥à¦¾ (à¦­à¦¿à¦¤à¦°à§‡/à¦¬à¦¾à¦‡à¦°à§‡) à¦‰à¦²à§à¦²à§‡à¦– à¦•à¦°à¦¤à§‡ à¦¹à¦¬à§‡à¥¤',
                'confirm_start_msg': 'à¦°à§à¦® {num} à¦ªà¦°à¦¿à¦·à§à¦•à¦¾à¦° à¦•à¦°à¦¾ à¦¶à§à¦°à§ à¦•à¦°à¦¬à§‡à¦¨?',
                'confirm_acknowledge_msg': 'à¦¸à§à¦¬à§€à¦•à¦¾à¦° à¦•à¦°à§à¦¨ à¦à¦¬à¦‚ à¦°à§à¦® {num} à¦à¦° à¦¦à¦¿à¦•à§‡ à¦¯à¦¾à¦¬à§‡à¦¨?',
                'confirm_check_msg': 'à¦°à§à¦® {num} à¦à¦° à¦œà¦¨à§à¦¯ à¦ªà¦°à¦¿à¦¦à¦°à§à¦¶à¦¨ à¦¶à§à¦°à§ à¦•à¦°à¦¬à§‡à¦¨?',
                'confirm_finish_inspection_msg': 'à¦°à§à¦® {num} à¦à¦° à¦œà¦¨à§à¦¯ à¦ªà¦°à¦¿à¦¦à¦°à§à¦¶à¦¨ à¦¸à¦®à§à¦ªà§‚à¦°à§à¦£ à¦•à¦°à¦¬à§‡à¦¨?',
                'toast_start_ack': 'à¦°à§à¦® {num} ({mode}) à¦à¦° à¦¦à¦¿à¦•à§‡ à¦¯à¦¾à¦“à¦¯à¦¼à¦¾ à¦¶à§à¦°à§ à¦¹à¦šà§à¦›à§‡',
                'toast_start_clean': 'à¦°à§à¦® {num} à¦ªà¦°à¦¿à¦·à§à¦•à¦¾à¦° à¦•à¦°à¦¾ à¦¶à§à¦°à§ à¦¹à¦šà§à¦›à§‡',
                'toast_start_check': 'à¦ªà¦°à¦¿à¦¦à¦°à§à¦¶à¦¨ à¦ªà¦°à§à¦¬ à¦¶à§à¦°à§ à¦¹à¦šà§à¦›à§‡',
                'toast_room_documented': 'à¦°à§à¦® {num} à¦¡à¦•à§à¦®à§‡à¦¨à§à¦Ÿ à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡ à¦à¦¬à¦‚ à¦¸à¦®à§à¦ªà¦¨à§à¦¨ à¦¹à¦¯à¦¼à§‡à¦›à§‡',
                'pressure_mode': 'à¦¶à§à¦°à§ à¦•à¦°à¦¾à¦° à¦®à§‹à¦¡ à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à§à¦¨',
                'pressure_mode_msg': 'à¦à¦‡ à¦°à§à¦®à§‡à¦° à¦œà¦¨à§à¦¯ à¦šà¦¾à¦ªà§‡à¦° à¦®à§‹à¦¡ à¦•à¦¿?',
                'normal_mode': 'à¦¸à¦¾à¦§à¦¾à¦°à¦£ à¦®à§‹à¦¡ (Normal)',
                'room_inspection': 'ğŸ“ à¦°à§à¦® à¦ªà¦°à¦¿à¦¦à¦°à§à¦¶à¦¨ à¦°à¦¿à¦ªà§‹à¦°à§à¦Ÿ',
                'delay_reasons': 'à¦¦à§‡à¦°à¦¿à¦° à¦•à¦¾à¦°à¦£ (à¦¯à¦¦à¦¿ à¦¥à¦¾à¦•à§‡):',
                'none': 'à¦•à§‹à¦¨à§‹ à¦¦à§‡à¦°à¦¿ à¦¨à§‡à¦‡',
                'busy_reception': 'à¦°à¦¿à¦¸à§‡à¦ªà¦¶à¦¨à§‡ à¦¬à§à¦¯à¦¸à§à¦¤',
                'room_many_notes': 'à¦˜à¦°à§‡ à¦…à¦¨à§‡à¦• à¦®à¦¨à§à¦¤à¦¬à§à¦¯ à¦†à¦›à§‡',
                'other_reason': 'à¦…à¦¨à§à¦¯à¦¾à¦¨à§à¦¯ à¦•à¦¾à¦°à¦£',
                'worker_notes': 'à¦ªà¦°à¦¿à¦¦à¦°à§à¦¶à¦¨ à¦¨à§‹à¦Ÿ:',
                'none_notes': 'à¦•à§‹à¦¨à§‹ à¦¨à§‹à¦Ÿ à¦¨à§‡à¦‡',
                'needs_maintenance': 'à¦®à§‡à¦°à¦¾à¦®à¦¤ à¦ªà§à¦°à¦¯à¦¼à§‹à¦œà¦¨',
                'missing_linens': 'à¦²à¦¿à¦¨à§‡à¦¨à§‡à¦° à¦…à¦­à¦¾à¦¬',
                'deep_clean': 'à¦—à¦­à§€à¦° à¦ªà¦°à¦¿à¦¸à§à¦•à¦¾à¦° à¦†à¦¬à¦¶à§à¦¯à¦•',
                'maintenance_details_label': 'à¦®à§‡à¦°à¦¾à¦®à¦¤à§‡à¦° à¦¬à¦¿à¦¬à¦°à¦£ (à¦†à¦¬à¦¶à§à¦¯à¦•):',
                'maintenance_details_placeholder': 'à¦•à§‹à¦¨ à¦œà¦¿à¦¨à¦¿à¦¸à¦—à§à¦²à¦¿à¦° à¦®à§‡à¦°à¦¾à¦®à¦¤ à¦ªà§à¦°à¦¯à¦¼à§‹à¦œà¦¨?',
                'maintenance_status_label': 'à¦®à§‡à¦°à¦¾à¦®à¦¤ à¦…à¦¬à¦¸à§à¦¥à¦¾:',
                'maintenance_status_ongoing': 'à¦šà¦²à¦®à¦¾à¦¨',
                'maintenance_status_completed': 'à¦®à§‡à¦°à¦¾à¦®à¦¤ à¦¸à¦®à§à¦ªà¦¨à§à¦¨ (à¦›à¦¬à¦¿ à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¨)',
                'status_proof': 'à¦…à¦¬à¦¸à§à¦¥à¦¾ à¦ªà§à¦°à¦®à¦¾à¦£ (à¦à¦šà§à¦›à¦¿à¦•):',
                'image_camera': 'ğŸ“¸ à¦•à§à¦¯à¦¾à¦®à§‡à¦°à¦¾ à¦–à§à¦²à§à¦¨',
                'image_file': 'ğŸ“„ à¦—à§à¦¯à¦¾à¦²à¦¾à¦°à¦¿ à¦¥à§‡à¦•à§‡ à¦«à¦¾à¦‡à¦² à¦†à¦ªà¦²à§‹à¦¡ à¦•à¦°à§à¦¨ (à¦›à¦¬à¦¿/à¦ªà¦¿à¦¡à¦¿à¦à¦«)',
                'photo_hint': '(à¦¶à§à¦§à§à¦®à¦¾à¦¤à§à¦° à¦à¦•à¦Ÿà¦¿ à¦«à¦¾à¦‡à¦² à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à¦¾ à¦¯à¦¾à¦¬à§‡)',
                'confirm_send': 'à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨ à¦“ à¦ªà¦¾à¦ à¦¾à¦¨ ğŸš€',
                'cancel': 'à¦¬à¦¾à¦¤à¦¿à¦²',
                'alert_repair_details': 'ğŸ”´ à¦†à¦¬à¦¶à§à¦¯à¦•: à¦®à§‡à¦°à¦¾à¦®à¦¤à§‡à¦° à¦ªà§à¦°à¦¯à¦¼à§‹à¦œà¦¨ à¦à¦®à¦¨ à¦œà¦¿à¦¨à¦¿à¦¸à¦—à§à¦²à¦¿à¦° à¦¬à¦¿à¦¬à¦°à¦£ à¦¦à¦¿à¦¤à§‡ à¦¹à¦¬à§‡à¥¤',
                'alert_image_mandatory': "ğŸ”´ à¦†à¦¬à¦¶à§à¦¯à¦•: 'à¦˜à¦°à§‡ à¦…à¦¨à§‡à¦• à¦®à¦¨à§à¦¤à¦¬à§à¦¯ à¦†à¦›à§‡' à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à¦²à§‡ à¦›à¦¬à¦¿ à¦¸à¦‚à¦¯à§à¦•à§à¦¤ à¦•à¦°à¦¤à§‡ à¦¹à¦¬à§‡à¥¤",
                'log_image_alert': 'ğŸ“¸ à¦°à§à¦® {num} à¦¨à§‹à¦Ÿà§‡à¦° à¦œà¦¨à§à¦¯ à¦›à¦¬à¦¿ à¦¸à¦‚à¦¯à§à¦•à§à¦¤ à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤',
                'report_title_wa': '*à¦°à§à¦® {num} à¦ªà¦°à¦¿à¦·à§à¦•à¦¾à¦°à§‡à¦° à¦°à¦¿à¦ªà§‹à¦°à§à¦Ÿ*',
                'report_start_time_wa': 'ğŸ•’ à¦¶à§à¦°à§à¦° à¦¸à¦®à¦¯à¦¼: {time}',
                'report_delay_reason_wa': 'ğŸ›‘ à¦¦à§‡à¦°à¦¿à¦° à¦•à¦¾à¦°à¦£: {reason}',
                'report_no_delay_wa': 'âœ… à¦•à§‹à¦¨à§‹ à¦¦à§‡à¦°à¦¿ à¦¨à§‡à¦‡',
                'report_maint_wa': 'ğŸ› ï¸ à¦®à§‡à¦°à¦¾à¦®à¦¤: {status}. à¦¬à¦¿à¦¬à¦°à¦£: {details}',
                'report_other_notes_wa': 'ğŸ“ à¦ªà¦°à¦¿à¦¦à¦°à§à¦¶à¦¨ à¦¨à§‹à¦Ÿ: {notes}',
                'report_no_notes_wa': 'ğŸ“ à¦•à§‹à¦¨à§‹ à¦ªà¦°à¦¿à¦¦à¦°à§à¦¶à¦¨ à¦¨à§‹à¦Ÿ à¦¨à§‡à¦‡',
                'report_clean_time_wa': 'ğŸ§¹ à¦ªà¦°à¦¿à¦¸à§à¦•à¦¾à¦° à¦¸à¦®à§à¦ªà¦¨à§à¦¨ à¦¹à¦¯à¦¼à§‡à¦›à§‡: {time}à¦®à¦¿à¦¨à¦¿à¦Ÿà§‡',
                'report_check_time_wa': 'ğŸ” à¦ªà¦°à¦¿à¦¦à¦°à§à¦¶à¦¨ à¦¸à¦®à§à¦ªà¦¨à§à¦¨ à¦¹à¦¯à¦¼à§‡à¦›à§‡: {time}à¦®à¦¿à¦¨à¦¿à¦Ÿà§‡',
                'report_image_link_wa': 'ğŸ”— *à¦›à¦¬à¦¿à¦° à¦²à¦¿à¦™à§à¦•:* [à¦›à¦¬à¦¿ à¦¸à¦‚à¦¯à§à¦•à§à¦¤]',
                'password_modal_title_reset': 'à¦¸à¦®à§à¦ªà§‚à¦°à§à¦£ à¦¡à§‡à¦Ÿà¦¾ à¦®à§‹à¦›à¦¾',
                'password_modal_title_log': 'à¦¸à¦®à§à¦ªà¦¨à§à¦¨ à¦²à¦— à¦•à§‡à¦¬à¦² à¦®à§‹à¦›à¦¾',
                'password_msg_allow': 'âš ï¸ à¦­à§‹à¦° à§§:à§¦à§¦ à¦Ÿà¦¾à¦° à¦ªà¦°. à¦¦à¦¿à¦¨ à¦®à§‹à¦›à¦¾à¦° à¦œà¦¨à§à¦¯ à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨ à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦¦à¦¿à¦¨à¥¤',
                'password_msg_deny': 'ğŸ”’ à¦¸à§à¦¬à¦¯à¦¼à¦‚à¦•à§à¦°à¦¿à¦¯à¦¼ à¦®à§‹à¦›à¦¾à¦° à¦¸à¦®à¦¯à¦¼ à¦¹à¦¯à¦¼à¦¨à¦¿ (à¦­à§‹à¦° à§§:à§¦à§¦ à¦Ÿà¦¾). à¦¸à¦®à¦¯à¦¼ à¦¨à¦¿à¦·à§‡à¦§à¦¾à¦œà§à¦à¦¾ à¦à¦¡à¦¼à¦¾à¦¤à§‡ à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦¦à¦¿à¦¨à¥¤',
                'password_msg_log': 'à¦¬à¦°à§à¦¤à¦®à¦¾à¦¨ à¦²à¦— à¦®à§‹à¦›à¦¾à¦° à¦œà¦¨à§à¦¯ à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨ à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦¦à¦¿à¦¨à¥¤',
                'password_placeholder': 'à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡',
                'btn_confirm_reset': 'à¦®à§‹à¦›à¦¾ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨',
                'btn_confirm_log_clear': 'à¦®à§‹à¦›à¦¾ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨',
                'toast_data_cleared': 'âœ… à¦¡à§‡à¦Ÿà¦¾ à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦®à§‹à¦›à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡ à¦à¦¬à¦‚ à¦¨à¦¤à§à¦¨ à¦¦à¦¿à¦¨ à¦¶à§à¦°à§ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤',
                'toast_log_cleared': 'âœ… à¦…à¦ªà¦¾à¦°à§‡à¦¶à¦¨ à¦²à¦— à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦®à§‹à¦›à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤',
                'alert_wrong_password_allowed': 'âŒ à¦­à§à¦² à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡. à¦­à§‹à¦° à§§:à§¦à§¦ à¦Ÿà¦¾à¦° à¦ªà¦°à§‡ à¦¸à¦ à¦¿à¦• à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦›à¦¾à¦¡à¦¼à¦¾ à¦®à§‹à¦›à¦¾ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾à¥¤',
                'alert_wrong_password_denied': 'âŒ à¦­à§à¦² à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡. à¦•à§‡à¦¬à¦² à¦¸à¦ à¦¿à¦• à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦¸à¦¹ à¦¬à¦¾ à¦­à§‹à¦° à§§:à§¦à§¦ à¦Ÿà¦¾à¦° à¦ªà¦°à§‡ à¦®à§‹à¦›à¦¾à¦° à¦…à¦¨à§à¦®à¦¤à¦¿ à¦†à¦›à§‡à¥¤',
                'confirm_modal_title': 'à¦•à¦¾à¦°à§à¦¯ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨',
                'confirm_modal_message': 'à¦†à¦ªà¦¨à¦¿ à¦•à¦¿ à¦à¦—à¦¿à¦¯à¦¼à§‡ à¦¯à§‡à¦¤à§‡ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤?',
                'confirm_modal_yes': 'à¦¹à§à¦¯à¦¾à¦ØŒ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨',
                'status_time_check_now': 'à¦ªà¦°à¦¿à¦¦à¦°à§à¦¶à¦¨ à¦šà¦²à¦›à§‡',
                'log_in_alert': 'âš ï¸ à¦…à¦¤à¦¿à¦¥à¦¿ à¦­à§‡à¦¤à¦°à§‡ à¦†à¦›à§‡à¦¨',
                'status_acknowledging': 'à¦¸à§à¦¥à¦¾à¦¨à¦¾à¦¨à§à¦¤à¦°à¦¿à¦¤ à¦¹à¦šà§à¦›à§‡',
                'status_cleaning_badge': 'à¦ªà¦°à¦¿à¦·à§à¦•à¦¾à¦° à¦•à¦°à¦¾ à¦¹à¦šà§à¦›à§‡',
                'status_checking_live_badge': 'à¦²à¦¾à¦‡à¦­ à¦šà§‡à¦•',
                'status_checking_badge': 'à¦¡à¦•à§à¦®à§‡à¦¨à§à¦Ÿà§‡à¦° à¦œà¦¨à§à¦¯ à¦ªà§à¦°à¦¸à§à¦¤à§à¦¤',
                'image_label_before': 'à¦…à¦¬à¦¸à§à¦¥à¦¾ à¦ªà§à¦°à¦®à¦¾à¦£ (à¦†à¦—à§‡à¦° à¦›à¦¬à¦¿):',
                'image_label_after': 'à¦…à¦¬à¦¸à§à¦¥à¦¾ à¦ªà§à¦°à¦®à¦¾à¦£ (à¦ªà¦°à§‡à¦° à¦›à¦¬à¦¿):',
                'default_staff_interface': 'à¦à¦Ÿà¦¿ à¦¸à§à¦Ÿà¦¾à¦« à¦‡à¦¨à§à¦Ÿà¦¾à¦°à¦«à§‡à¦¸ (à¦¡à¦¿à¦«à¦²à§à¦Ÿ)à¥¤',
                'workers': 'à¦•à¦°à§à¦®à§€à¦°à¦¾'
            }
        };
        let currentLang = 'ar';
        // --- END TRANSLATION DATA ---

        // --- INIT ---
        window.onload = () => {
            loadState(); // ğŸ‘ˆ Start the Firebase Listener
            setInterval(tick, 1000); // Keep local timers running
            checkConn();
            window.addEventListener('online', checkConn);
            window.addEventListener('offline', checkConn);
            // Redundant UI updates (renderRooms, updateStats) are now handled inside loadState/onSnapshot
        };

        // --- HAPTIC & CONFIRMATION ---
        function vibrate(ms) {
            if (navigator.vibrate) navigator.vibrate(ms);
        }

        function showConfirmation(key, placeholders = {}) {
            const toast = document.getElementById('worker-toast');
            if (!toast) return;
            toast.innerText = getTranslation(key, placeholders);
            toast.classList.add('show');
            vibrate(20); 
            setTimeout(() => toast.classList.remove('show'), 1500);
        }
        
        // NEW: Audible alert generator
        function playAlertSound() {
            try {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioCtx.destination);

                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(440, audioCtx.currentTime); 
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);

                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 0.1); 
            } catch (e) {
                console.warn("Audio Context not supported or failed to start.");
            }
        }
        
        // NEW: Shared Confirmation Logic
        function showActionConfirm(titleKey, messageKey, callback, placeholders = {}) {
            const modal = document.getElementById('action-confirm-modal');
            document.getElementById('confirm-title').innerText = getTranslation(titleKey);
            document.getElementById('confirm-message').innerText = getTranslation(messageKey, placeholders);
            document.getElementById('confirm-yes-btn').onclick = function() {
                modal.style.display = 'none';
                callback();
            };
            modal.style.display = 'flex';
        }


        // --- TOGGLE MODES REMOVED ---
        
        // NEW: Global Turbo Mode Toggle
        function toggleTurboMode() {
            isTurboMode = !isTurboMode;
            const btn = document.getElementById('turbo-mode-btn');
            
            if (isTurboMode) {
                btn.style.background = 'var(--danger)';
                btn.classList.add('btn-turbo-active');
                btn.innerText = getTranslation('turbo_btn_off');
                showConfirmation('toast_turbo_on');
            } else {
                btn.style.background = 'var(--success)';
                btn.classList.remove('btn-turbo-active');
                btn.innerText = getTranslation('turbo_btn_on');
                showConfirmation('toast_turbo_off');
            }
            // CLEANUP: Saving state to Firebase for global consistency
            saveState(); 
        }

        // --- CORE LOGIC ---

        // ğŸ” UPDATE SEARCH STATE
        function updateSearch(val) {
            searchText = val.trim();
            renderRooms();
        }

        function renderRooms() {
            const container = document.getElementById('rooms-container');
            
            const activeRooms = workerState.rooms.filter(r => r.num !== '');
            activeRooms.sort((a, b) => b.id - a.id);

            let inputRoom = workerState.rooms.find(r => r.num === '');

            let displayOrder = [];
            
            // ğŸ” IF SEARCHING: Show filtered results ONLY (Hide Input Row)
            if (searchText) {
                 displayOrder = activeRooms.filter(r => {
                    const numMatch = r.num.toString().includes(searchText);
                    // Simple type check (can be expanded to localized strings if needed)
                    const typeMatch = (r.type === 'stay' && 'Ø³Ø§ÙƒÙ†'.includes(searchText)) || 
                                      (r.type === 'out' && 'Ø®Ø±ÙˆØ¬'.includes(searchText));
                    return numMatch || typeMatch;
                 });
            } else {
                // ğŸ›¡ï¸ STANDARD MODE: Single Task Logic
                // Show input row ONLY if there are NO active rooms
                if (inputRoom && activeRooms.length === 0) {
                    displayOrder.push(inputRoom);
                }
                displayOrder = displayOrder.concat(activeRooms);
            }
            
            // ğŸ”¥ Self-Healing: If empty in standard mode, create input row
            if (!searchText && displayOrder.length === 0) {
                const newInputRoom = { 
                    id: Date.now(), num: '', type: '', guestStatus: '', status: 'pending', start: 0, checkStart: 0, undoTimer: 0, timerLimit: 0 
                };
                workerState.rooms.push(newInputRoom);
                displayOrder.push(newInputRoom);
                saveState();
            }
            
            // Generate HTML for all rows
            if (displayOrder.length === 0 && searchText) {
                container.innerHTML = `<div style="text-align:center; color:#999; padding:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù€ "${searchText}"</div>`;
            } else {
                container.innerHTML = displayOrder.map((r) => {
                    const isStay = r.type === 'stay';
                    const guestStatusRequired = isStay && r.num && r.status === 'pending';
                    
                    // Determine style for sub-select based on validation
                    const guestStatusStyle = guestStatusRequired && !r.guestStatus ? 'border: 2px solid var(--danger)' : '';
                    
                    // Use getTranslation for option texts
                    const subSelectHTML = isStay ? `
                        <div class="sub-select-container">
                            <select class="type-select" onchange="updateRoomData(${r.id}, 'guestStatus', this.value)" ${r.status !== 'pending' ? 'disabled' : ''} style="${guestStatusStyle}">
                                <option value="" disabled ${!r.guestStatus ? 'selected' : ''} data-lang-key="guest_status_default">${getTranslation('guest_status_default')}</option>
                                <option value="in" ${r.guestStatus === 'in' ? 'selected' : ''} data-lang-key="guest_status_in">${getTranslation('guest_status_in')}</option>
                                <option value="out" ${r.guestStatus === 'out' ? 'selected' : ''} data-lang-key="guest_status_out">${getTranslation('guest_status_out')}</option>
                            </select>
                        </div>
                    ` : '';

                    return `
                        <div class="room-row status-${getRoomStatusClass(r)}" id="row-${r.id}">
                            <div class="timer-display ${getTimerClass(r)}">
                                ${getTimerText(r)}
                                <span class="badge">${getBadgeText(r)}</span>
                            </div>
                            <div>
                                <input type="number" class="room-input" data-lang-placeholder="input_placeholder" placeholder="${getTranslation('input_placeholder')}"
                                    value="${r.num}" onchange="updateRoomData(${r.id}, 'num', this.value)" 
                                    ${r.status !== 'pending' ? 'disabled' : ''}>
                            </div>
                            <div>
                                <select class="type-select" onchange="updateRoomData(${r.id}, 'type', this.value)" ${r.status !== 'pending' ? 'disabled' : ''} style="border-color:${!r.type && r.num ? 'red' : '#cfd8dc'}">
                                    <option value="" disabled ${!r.type ? 'selected' : ''} data-lang-key="type_select_default">${getTranslation('type_select_default')}</option>
                                    <option value="stay" ${r.type==='stay'?'selected':''} data-lang-key="type_option_stay">${getTranslation('type_option_stay')}</option>
                                    <option value="out" ${r.type==='out'?'selected':''} data-lang-key="type_option_out">${getTranslation('type_option_out')}</option>
                                </select>
                                ${subSelectHTML}
                            </div>
                            <div id="action-cell-${r.id}">
                                ${getActionBtn(r)}
                            </div>
                        </div>
                    `;
                }).join('');
            }
        }

        function updateRoomData(id, field, val) {
            const r = workerState.rooms.find(x => x.id === id);
            if(r) { 
                r[field] = val; 
                
                if (field === 'type' && val !== 'stay') {
                    r.guestStatus = '';
                }
                
                saveState(); 
                renderRooms(); 
            }
        }

        function startRoom(id) {
            const r = workerState.rooms.find(x => x.id === id);
            
            if (!r.num || !r.type) {
                alert(getTranslation("alert_room_num_type"));
                return;
            }
            if (r.type === 'stay' && !r.guestStatus) {
                alert(getTranslation("alert_guest_status"));
                return;
            }

            // Determine if Rain Mode is ON
            if (isTurboMode) {
                commitStartRoom(id, true);
            } else {
                window.tempRoomId = id; // Store ID globally for modal callback
                document.getElementById('rain-prompt-modal').style.display = 'flex';
            }
        }

        // Commits the room start after Rain Mode selection
        function commitStartRoom(id, isRainActive) {
            document.getElementById('rain-prompt-modal').style.display = 'none';
            const r = workerState.rooms.find(x => x.id === id);
            
            // Set limits based on selection (New: +10 minutes)
            let limitMin = 35; 
            if (r.type === 'stay') limitMin = isRainActive ? 20 : 25; // 20/25 min
            if (r.type === 'out') limitMin = isRainActive ? 30 : 35; // 30/35 min
            
            r.timerLimit = limitMin * 60000;
            r.isRainActive = isRainActive; 
            r.status = 'acknowledging'; // NEW: Start Acknowledging/Travel status
            r.start = Date.now();
            r.undoTimer = 10; // 10s rollback check
            saveState(); 
            
            renderRooms();
            showConfirmation('toast_start_ack', { num: r.num, mode: isRainActive ? getTranslation('high_pressure') : getTranslation('normal_mode') });
        }

        // Commits the move from Acknowledging to Cleaning
        function acknowledgeTravel(id) {
            const r = workerState.rooms.find(x => x.id === id);
            
            r.status = 'cleaning';
            r.start = Date.now(); // Reset start time to NOW for accurate cleaning countdown
            r.undoTimer = 10; // 10s rollback check for cleaning start
            
            saveState(); renderRooms();
            showConfirmation('toast_start_clean', { num: r.num });
        }
        
        function checkRoom(id) {
            const r = workerState.rooms.find(x => x.id === id);
            r.status = 'checking_live'; 
            r.checkStart = Date.now();
            r.undoTimer = 10; // 10s rollback check
            saveState(); renderRooms();
            showConfirmation('toast_start_check');
        }

        function finishInspection(id) {
            const r = workerState.rooms.find(x => x.id === id);
            r.status = 'checking'; // FINAL READY STATE FOR MODAL
            r.undoTimer = 10; // 10s rollback check
            saveState(); renderRooms();
            showConfirmation('toast_room_documented', { num: r.num }); // Reusing this for general success
        }

        function undo(id) {
            const r = workerState.rooms.find(x => x.id === id);
            if(r.undoTimer > 0) {
                // Rollback Logic
                if (r.status === 'checking') { 
                    r.status = 'checking_live';
                } else if (r.status === 'checking_live') { 
                    r.status = 'cleaning';
                    r.checkStart = 0;
                } else if (r.status === 'cleaning') {
                    r.status = 'acknowledging'; // Rollback to acknowledging state
                    r.start = 0; // Clear start time for cleaning
                } else if (r.status === 'acknowledging') {
                    r.status = 'pending'; // Rollback to initial pending state
                    r.start = 0;
                    
                    // âš ï¸ Ø¹Ù†Ø¯ Ø§Ù„ØªØ±Ø§Ø¬Ø¹ØŒ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ ØµÙ ÙØ§Ø±Øº Ù…ÙƒØ±Ø±ØŒ Ù†Ø­Ø°ÙÙ‡
                    const inputRoomIndex = workerState.rooms.findIndex(room => room.num === '');
                    if (inputRoomIndex !== -1) {
                         workerState.rooms.splice(inputRoomIndex, 1);
                    }
                }
                r.undoTimer = 0;
                saveState(); renderRooms();
                showConfirmation('btn_undo'); // Generic undo confirmation
            }
        }

        function getActionBtn(r) {
            if (!r.num) return '';
            
            if (r.status === 'pending' && r.undoTimer <= 0) {
                 return `<button class="btn-action btn-start" onclick="showActionConfirm('confirm_modal_title', 'confirm_start_msg', () => startRoom(${r.id}), { num: ${r.num} })">${getTranslation('btn_start')}</button>`;
            }

            if (r.status === 'acknowledging') {
                 return `<button class="btn-action btn-start" onclick="showActionConfirm('confirm_modal_title', 'confirm_acknowledge_msg', () => acknowledgeTravel(${r.id}), { num: ${r.num} })">${getTranslation('btn_acknowledge')}</button>`;
            }

            if (r.status === 'cleaning') {
                return `
                    <button class="btn-action btn-check" onclick="showActionConfirm('confirm_modal_title', 'confirm_check_msg', () => checkRoom(${r.id}), { num: ${r.num} })">${getTranslation('btn_check')}</button>
                    <button id="undo-btn-${r.id}" class="btn-action btn-undo" style="display:${r.undoTimer > 0 ? 'block' : 'none'}" onclick="undo(${r.id})">${getTranslation('btn_undo')} (${r.undoTimer})</button>
                `;
            }
            
            if (r.status === 'checking_live') {
                return `
                    <div style="font-weight:bold; color:var(--warning); font-size:0.8rem; margin-bottom:5px;">${getTranslation('status_time_check_now')}</div>
                    <button class="btn-action btn-finish" onclick="showActionConfirm('confirm_modal_title', 'confirm_finish_inspection_msg', () => finishInspection(${r.id}), { num: ${r.num} })">${getTranslation('btn_finish_inspection')}</button>
                    <button id="undo-btn-${r.id}" class="btn-action btn-undo" style="display:${r.undoTimer > 0 ? 'block' : 'none'}" onclick="undo(${r.id})">${getTranslation('btn_undo')} (${r.undoTimer})</button>
                `;
            }

            if (r.status === 'checking') return `
                 <button class="btn-action btn-finish" onclick="openFinishModal(${r.id})">${getTranslation('btn_document_finish')}</button>
                 <button id="undo-btn-${r.id}" class="btn-action btn-undo" style="display:${r.undoTimer > 0 ? 'block' : 'none'}" onclick="undo(${r.id})">${getTranslation('btn_undo')} (${r.undoTimer})</button>
            `;
            return 'âœ…';
        }

        // --- TICKER ---
        function tick() {
            const now = Date.now();
            let hasOverTimer = false;
            
            // âŒ Ø­Ø°ÙÙ†Ø§ Ù…Ù†Ø·Ù‚ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù‡Ù†Ø§ØŒ Ù„Ø£Ù†Ù‡ ÙŠØªÙ… Ø§Ù„Ø¢Ù† ÙÙŠ renderRooms ÙƒØ´ÙØ§Ø¡ Ø°Ø§ØªÙŠ (Self-Healing) âŒ

            workerState.rooms.forEach(r => {
                if (r.undoTimer > 0) { 
                    r.undoTimer--; 
                    const undoBtn = document.getElementById(`undo-btn-${r.id}`);
                    if(undoBtn) {
                        undoBtn.innerText = `${getTranslation('btn_undo')} (${r.undoTimer})`;
                        if (r.undoTimer === 0) {
                            // Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¹Ø¯Ø§Ø¯ØŒ Ù†Ø¹ÙŠØ¯ Ø§Ù„Ø±Ø³Ù… Ù„ÙƒÙŠ ÙŠØ¸Ù‡Ø± ØµÙ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯
                            renderRooms();
                        }
                    }
                }
                
                if (r.status === 'cleaning' || r.status === 'checking_live' || r.status === 'acknowledging') {
                    
                    const limit = r.timerLimit || (25*60000);
                    let timePassed;
                    let timeRemainingMs;
                    
                    if (r.status === 'acknowledging') {
                        timePassed = now - r.start;
                        timeRemainingMs = TRAVEL_TIME_MS - timePassed;
                    } else {
                        const startT = r.status === 'cleaning' ? r.start : r.checkStart;
                        timePassed = now - startT;
                        timeRemainingMs = limit - timePassed;

                        if (timePassed > limit) hasOverTimer = true;
                    }
                    
                    const remainingSeconds = Math.floor(timeRemainingMs / 1000);
                    if (timeRemainingMs <= 120000 && timeRemainingMs > 0) { // Last 2 minutes
                        if (remainingSeconds % 15 === 0) {
                            playAlertSound();
                        }
                    }

                    const rowTimer = document.querySelector(`#row-${r.id} .timer-display`);
                    if(rowTimer) {
                        rowTimer.className = `timer-display ${getTimerClass(r)}`;
                        rowTimer.innerHTML = `${getTimerText(r)} <span class="badge">${getBadgeText(r)}</span>`;
                    }
                    const rowDiv = document.querySelector(`#row-${r.id}`);
                    if(rowDiv) rowDiv.className = `room-row status-${getRoomStatusClass(r)}`;
                }
            });

            const alertBar = document.getElementById('timer-alert-bar');
            if(alertBar) alertBar.style.display = hasOverTimer ? 'block' : 'none';
        }

        function getTimerText(r) {
            if (r.status === 'pending') return '--:--';
            
            const startT = r.status === 'acknowledging' ? r.start : (r.status === 'cleaning' ? r.start : r.checkStart);
            
            if (r.status === 'acknowledging') {
                const diff = (r.start + TRAVEL_TIME_MS) - Date.now();
                const mins = Math.floor(Math.abs(diff) / 60000);
                const secs = Math.floor((Math.abs(diff) % 60000) / 1000);
                if (diff < 0) return `+${Math.abs(mins)}:${Math.abs(secs).toString().padStart(2,'0')}`;
                return `${mins}:${secs.toString().padStart(2,'0')}`;
            }
            
            const limit = r.timerLimit || (25*60000);
            const diff = limit - (Date.now() - startT);
            const mins = Math.floor(Math.abs(diff) / 60000);
            const secs = Math.floor((Math.abs(diff) % 60000) / 1000);
            return `${diff < 0 ? '+' : ''}${mins}:${secs.toString().padStart(2,'0')}`;
        }

        function getTimerClass(r) {
            if (r.status === 'pending') return '';
            if (r.status === 'acknowledging') {
                const diff = (r.start + TRAVEL_TIME_MS) - Date.now();
                return diff < 0 ? 'timer-danger' : 'timer-active';
            }
            const startT = r.status === 'cleaning' ? r.start : r.checkStart;
            const limit = r.timerLimit || (25*60000); 
            return (Date.now() - startT > limit) ? 'timer-danger' : 'timer-active';
        }

        function getBadgeText(r) {
            if(r.status==='acknowledging') return getTranslation('status_acknowledging');
            if(r.status==='cleaning') return getTranslation('status_cleaning_badge');
            if(r.status==='checking_live') return getTranslation('status_checking_live_badge');
            if(r.status==='checking') return getTranslation('status_checking_badge');
            return '';
        }

        function getRoomStatusClass(r) {
            if (r.status === 'acknowledging') {
                const diff = (r.start + TRAVEL_TIME_MS) - Date.now();
                return diff < 0 ? 'over' : 'acknowledging';
            }
            if (r.status === 'cleaning' || r.status === 'checking_live') {
                 const startT = r.status === 'cleaning' ? r.start : r.checkStart;
                 const limit = r.timerLimit || (25*60000);
                 if (Date.now() - startT > limit) return 'over';
            }
            return r.status;
        }

        // --- FINALIZATION ---
        let activeRoomId = null;
        function openFinishModal(id) {
            activeRoomId = id;
            const r = workerState.rooms.find(x => x.id === id);
            
            document.getElementById('modal-title-text').innerText = `${getTranslation('room_inspection')} ${r.num}`;

            document.getElementById('modal-delay').selectedIndex = 0;
            document.getElementById('modal-notes').selectedIndex = 0;
            document.getElementById('repair-details-input').value = '';
            document.getElementById('repair-status-select').selectedIndex = 0;
            document.getElementById('modal-img-camera-input').value = ""; 
            document.getElementById('modal-img-pdf-input').value = ""; 
            
            document.getElementById('delay-reason-label').innerText = getTranslation('delay_reasons');
            document.getElementById('repair-details-input').placeholder = getTranslation('maintenance_details_placeholder');

            const startT = r.status === 'cleaning' ? r.start : r.checkStart;
            const limit = r.timerLimit || (25*60000);
            const totalElapsedTime = (Date.now() - startT); 
            const isOverTime = totalElapsedTime > limit;

            const delaySection = document.getElementById('delay-reason-section');
            const delaySelect = document.getElementById('modal-delay');

            if (isOverTime) {
                delaySection.style.display = 'block';
                if (delaySelect.value === getTranslation('none')) {
                    delaySelect.selectedIndex = 1; 
                }
            } else {
                delaySection.style.display = 'none';
                delaySelect.selectedIndex = 0;
            }
            
            updateImageRequirementUI(); 
            updateMaintenanceUI(); 

            document.getElementById('final-modal').style.display = 'flex';
        }
        function closeModal() { document.getElementById('final-modal').style.display = 'none'; }
        
        function updateMaintenanceUI() {
            const notesSelect = document.getElementById('modal-notes');
            const maintenanceFields = document.getElementById('maintenance-fields');
            const imageLabel = document.getElementById('image-label');
            const repairStatusSelect = document.getElementById('repair-status-select');
            
            const needsMaintenance = notesSelect.value === 'ØªØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø©'; 
            maintenanceFields.style.display = needsMaintenance ? 'block' : 'none';
            
            if (needsMaintenance) {
                 imageLabel.innerText = getTranslation('image_label_before');
            } else {
                imageLabel.innerText = getTranslation('status_proof');
            }
            updateMaintenanceImageStatus();
        }

        function updateMaintenanceImageStatus() {
            const repairStatusSelect = document.getElementById('repair-status-select');
            const imageLabel = document.getElementById('image-label');
            
            if (repairStatusSelect.value === 'Completed') {
                 imageLabel.innerText = getTranslation('image_label_after');
            } else if (document.getElementById('modal-notes').value === 'ØªØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø©') {
                 imageLabel.innerText = getTranslation('image_label_before');
            } else {
                 imageLabel.innerText = getTranslation('status_proof');
            }
        }
        
        function updateImageRequirementUI() {
            const delaySelect = document.getElementById('modal-delay');
            const imgCamera = document.getElementById('modal-img-camera-input');
            const imgPdf = document.getElementById('modal-img-pdf-input');
            
            const isMandatory = delaySelect.value === 'Ø§Ù„ØºØ±ÙØ© Ø¨Ù‡Ø§ Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙƒØ«ÙŠØ±Ø©'; 
            
            if (isMandatory) {
                imgCamera.classList.add('required-field');
                imgPdf.classList.add('required-field');
            } else {
                imgCamera.classList.remove('required-field');
                imgPdf.classList.remove('required-field');
            }
        }

        function confirmFinishRoom() {
            const r = workerState.rooms.find(x => x.id === activeRoomId);
            const delay = document.getElementById('modal-delay').value; 
            const delayDisplay = document.getElementById('modal-delay').selectedOptions[0].text; 
            const notes = document.getElementById('modal-notes').value; 
            const notesDisplay = document.getElementById('modal-notes').selectedOptions[0].text; 
            const startTimeStr = new Date(r.start).toLocaleTimeString(currentLang, {hour:'numeric', minute:'numeric'});
            
            const imgCamera = document.getElementById('modal-img-camera-input');
            const imgPdf = document.getElementById('modal-img-pdf-input');
            const hasImage = imgCamera.files.length > 0 || imgPdf.files.length > 0;
            
            const needsMaintenance = notes === 'ØªØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø©';
            let repairDetails = 'N/A';
            let repairStatus = 'N/A';
            let repairStatusDisplay = 'N/A';

            if (needsMaintenance) {
                repairDetails = document.getElementById('repair-details-input').value.trim();
                repairStatus = document.getElementById('repair-status-select').value;
                repairStatusDisplay = document.getElementById('repair-status-select').selectedOptions[0].text;
                
                if (!repairDetails) {
                    alert(getTranslation("alert_repair_details"));
                    return;
                }
            }
            
            if (delay === 'Ø§Ù„ØºØ±ÙØ© Ø¨Ù‡Ø§ Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙƒØ«ÙŠØ±Ø©' && !hasImage) {
                alert(getTranslation("alert_image_mandatory"));
                return; 
            }
            
            const entry = {
                num: r.num,
                type: r.type === 'stay' ? 'Ø³Ø§ÙƒÙ†' : 'Ø®Ø±ÙˆØ¬',
                guestStatus: r.type === 'stay' ? r.guestStatus : 'N/A',
                cleanTime: Math.ceil((r.checkStart - r.start)/60000),
                checkTime: Math.ceil((Date.now() - r.checkStart)/60000),
                delay: delayDisplay,
                notes: notesDisplay,
                hasImage: hasImage, 
                repairDetails: repairDetails,
                repairStatus: repairStatusDisplay,
                startTimeStr: startTimeStr,
                time: new Date().toLocaleTimeString(currentLang, {hour:'numeric', minute:'numeric'}),
                timestamp: Date.now() // ğŸ”¥ Timestamp for future filtering
            };
            
            workerState.log.unshift(entry);
            // ğŸ›¡ï¸ MEMORY PROTECTION: Keep only last 150 entries to avoid Firebase limit
            if (workerState.log.length > 150) {
                workerState.log = workerState.log.slice(0, 150);
            }

            if(!navigator.onLine) buffer.push(entry);
            
            // 1. Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ù…Ù†Ø¬Ø²Ø©
            workerState.rooms = workerState.rooms.filter(x => x.id !== activeRoomId);

            // 2. Ø¶Ù…Ø§Ù† ÙˆØ¬ÙˆØ¯ ØµÙ Ø¥Ø¯Ø®Ø§Ù„ ÙØ§Ø±Øº ÙˆØ§Ø­Ø¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø²Ø§Ù„Ø© (ØªØ¬Ù†Ø¨ Ø§Ø®ØªÙØ§Ø¡ Ø§Ù„Ø¬Ø¯ÙˆÙ„)
            const hasInputRow = workerState.rooms.some(r => r.num === '');
            if (!hasInputRow) {
                workerState.rooms.push({ 
                    id: Date.now(), num: '', type: '', guestStatus: '', status: 'pending', start: 0, checkStart: 0, undoTimer: 0, timerLimit: 0 
                });
            }
            
            saveState(); renderRooms(); closeModal(); updateLogUI(); updateStats();
            showConfirmation('toast_room_documented', { num: entry.num });
            
            // WhatsApp Report Logic
            let msg = `${getTranslation('report_title_wa', { num: entry.num })}\n`;
            msg += `${getTranslation('report_start_time_wa', { time: entry.startTimeStr })}\n`;
            msg += `----------------\n`;

            let detailReport = '';
            if (delay !== 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ£Ø®ÙŠØ±') {
                detailReport += `\n${getTranslation('report_delay_reason_wa', { reason: entry.delay })}`;
            } else {
                 detailReport += `\n${getTranslation('report_no_delay_wa')}`;
            }
            
            if (notes === 'ØªØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø©') {
                 detailReport += `\n${getTranslation('report_maint_wa', { status: entry.repairStatus, details: entry.repairDetails })}`;
            } else if (notes !== 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª') {
                 detailReport += `\n${getTranslation('report_other_notes_wa', { notes: entry.notes })}`;
            } else {
                 detailReport += `\n${getTranslation('report_no_notes_wa')}`;
            }

            msg += `${getTranslation('report_clean_time_wa', { time: entry.cleanTime })}\n`;
            msg += `${getTranslation('report_check_time_wa', { time: entry.checkTime })}\n`;
            msg += `----------------\n`;
            msg += `${detailReport}\n`;
            
            if (hasImage) {
                msg += `\n${getTranslation('report_image_link_wa')}`;
            }
            
            window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, '_blank');
        }

        // --- UTILS ---
        const TRAVEL_TIME_MS = 15 * 60 * 1000; 

        function updateLogUI() {
            const list = document.getElementById('worker-log-list');
            if(workerState.log.length === 0) {
                 list.innerHTML = `<p id="log-none-p" style="text-align:center; color:#999;">${getTranslation('log_none')}</p>`;
                 return;
            }

            list.innerHTML = workerState.log.map((l, index) => {
                const isDelayed = l.delay !== getTranslation('none');
                
                return `
                <div style="border-bottom:1px solid #eee; padding:8px 0; display:flex; justify-content:space-between; align-items:center;">
                    <div>
                        <div style="font-weight:bold; color:var(--primary);">${l.num} <span style="font-size:0.7rem; color:#999;">(${l.type === 'Ø³Ø§ÙƒÙ†' ? getTranslation('workers') : getTranslation('workers')})</span></div>
                        <div style="font-size:0.7rem; color:#666;">${getTranslation('report_start_time_wa', { time: l.startTimeStr }).replace('ğŸ•’', '')}</div>
                        ${l.guestStatus === 'in' ? `<span style="font-size:0.7rem; color:var(--danger)">${getTranslation('log_in_alert')}</span>` : ''}
                    </div>
                    <div style="text-align:left; font-size:0.75rem; display:flex; gap:10px;">
                        ${l.hasImage ? `<button onclick="showLogImage(${index})" style="border:none; background:none; cursor:pointer; color:var(--upgrade); padding:0;">ğŸ“¸</button>` : ''}
                        <div>
                            <div>${l.cleanTime}Ø¯ ${getTranslation('status_cleaning_badge')}</div>
                            <div style="color:${isDelayed ? 'red' : '#999'};">${isDelayed ? getTranslation('delay') : getTranslation('none')}</div>
                        </div>
                    </div>
                </div>
                `;
            }).join('');
        }
        
        function showLogImage(index) {
            const logEntry = workerState.log[index];
            alert(getTranslation('log_image_alert', { num: logEntry.num }));
        }

        function updateStats() {
            const log = workerState.log;
            const totalCompleted = log.length;
            
            const countStay = log.filter(l => l.type === 'Ø³Ø§ÙƒÙ†').length;
            const countOut = totalCompleted - countStay;
            
            const allTotalTimes = log.map(l => l.cleanTime + l.checkTime).filter(t => t > 0);
            const cleanTimesOut = log.filter(l => l.type === 'Ø®Ø±ÙˆØ¬' && l.cleanTime > 0).map(l => l.cleanTime + l.checkTime);
            const cleanTimesStay = log.filter(l => l.type === 'Ø³Ø§ÙƒÙ†' && l.cleanTime > 0).map(l => l.cleanTime + l.checkTime);
            
            const fastestOut = cleanTimesOut.length > 0 ? cleanTimesOut.reduce((min, current) => Math.min(min, current)) : null;
            const fastestStay = cleanTimesStay.length > 0 ? cleanTimesStay.reduce((min, current) => Math.min(min, current)) : null;
            
            const fastestOutRoom = log.find(l => (l.cleanTime + l.checkTime) === fastestOut && l.type === 'Ø®Ø±ÙˆØ¬');
            const fastestStayRoom = log.find(l => (l.cleanTime + l.checkTime) === fastestStay && l.type === 'Ø³Ø§ÙƒÙ†');

            const maxTimeMs = allTotalTimes.length > 0 ? Math.max(...allTotalTimes) : 0;
            const minTimeMs = allTotalTimes.length > 0 ? Math.min(...allTotalTimes) : 0;
            const totalTimeMs = allTotalTimes.reduce((sum, time) => sum + time, 0);
            const avgTimeMs = totalCompleted > 0 ? totalTimeMs / totalCompleted : 0;
            
            const overTimerCount = log.filter(l => l.delay !== getTranslation('none')).length;

            document.getElementById('stat-completed').innerText = totalCompleted;
            document.getElementById('stat-avg').innerText = formatTimeDuration(avgTimeMs);
            document.getElementById('stat-over').innerText = overTimerCount;

            document.getElementById('stat-out-count').innerText = countOut;
            document.getElementById('stat-stay-count').innerText = countStay;
            
            document.getElementById('stat-max-time').innerText = maxTimeMs ? formatTimeDuration(maxTimeMs) : '--';
            document.getElementById('stat-min-time').innerText = minTimeMs ? formatTimeDuration(minTimeMs) : '--';
            
            if (fastestOutRoom) {
                document.getElementById('fastest-out-num').innerText = fastestOutRoom.num;
                document.getElementById('fastest-out-time').innerText = formatTimeDuration(fastestOut);
            } else {
                document.getElementById('fastest-out-num').innerText = '--';
                document.getElementById('fastest-out-time').innerText = `0Ø¯ 0Ø«`;
            }
             if (fastestStayRoom) {
                document.getElementById('fastest-stay-num').innerText = fastestStayRoom.num;
                document.getElementById('fastest-stay-time').innerText = formatTimeDuration(fastestStay);
            } else {
                document.getElementById('fastest-stay-num').innerText = '--';
                document.getElementById('fastest-stay-time').innerText = `0Ø¯ 0Ø«`;
            }
        }

        function formatTimeDuration(ms) {
            const totalSeconds = Math.max(0, Math.floor(ms / 1000));
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            if (minutes === 0 && seconds === 0 && ms > 0) return '<1Ø«';
            return `${minutes}Ø¯ ${seconds}Ø«`;
        }

        function toggleRainMode() {
            // This function is obsolete now that the prompt modal is used.
        }

        // ğŸ’¾ NEW: Firebase Save Function - Replaces localStorage saveState()
        // ğŸ›¡ï¸ Added Sync Indicator Logic
        function saveState() {
            const indicator = document.getElementById('sync-indicator');
            if (indicator) indicator.style.display = 'block';

            const mainDocRef = db.collection(collectionName).doc('main');

            const dataToSave = {
                rooms: workerState.rooms,
                log: workerState.log,
                timestamp: firebase.firestore.FieldValue.serverTimestamp() // Ø®ØªÙ… Ø§Ù„ÙˆÙ‚Øª
            };

            mainDocRef.set(dataToSave)
                .then(() => {
                    // Hide indicator after 1 second
                    if (indicator) setTimeout(() => indicator.style.display = 'none', 1000);
                })
                .catch((error) => {
                    console.error("Error saving state to Firebase:", error);
                    if (indicator) indicator.innerText = 'âŒ Ø®Ø·Ø£';
                });
        }

        // ğŸŒ NEW: Firebase Real-time Listener Function - Replaces localStorage loadState()
        function loadState() {
            const mainDocRef = db.collection(collectionName).doc('main');
            
            // onSnapshot: ØªØ³ØªÙ…Ø¹ Ù„Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù„Ø­Ø¸ÙŠØ© Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©
            mainDocRef.onSnapshot((doc) => {
                if (doc.exists) {
                    const data = doc.data();
                    // ØªØ­Ø¯ÙŠØ« workerState Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Firebase
                    workerState.rooms = data.rooms || [];
                    workerState.log = data.log || [];

                    // ğŸ”¥ Ø§Ù„Ø¥ØµÙ„Ø§Ø­: Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ ØµÙ Ø¥Ø¯Ø®Ø§Ù„ ÙØ§Ø±Øº ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„
                    let needsSave = false;
                    const hasInputRow = workerState.rooms.some(r => r.num === '');
                    const activeRoomsCount = workerState.rooms.filter(r => r.num !== '').length;
                    
                    // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ ØµÙ Ø¥Ø¯Ø®Ø§Ù„ ÙˆÙ„Ø§ ØªÙˆØ¬Ø¯ ØºØ±Ù Ù†Ø´Ø·Ø©ØŒ Ù†Ù†Ø´Ø¦ ØµÙ Ø¥Ø¯Ø®Ø§Ù„
                    if (!hasInputRow && activeRoomsCount === 0) {
                        workerState.rooms.push({ 
                            id: Date.now(), 
                            num: '', 
                            type: '', 
                            guestStatus: '', 
                            status: 'pending', 
                            start: 0, 
                            checkStart: 0, 
                            undoTimer: 0, 
                            timerLimit: 0 
                        });
                        needsSave = true;
                    }

                    // ğŸ”¥ Ù…Ù†Ø¹ ØªÙƒØ±Ø§Ø± ØµÙÙˆÙ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙØ§Ø±ØºØ©
                    const inputRows = workerState.rooms.filter(r => r.num === '');
                    if (inputRows.length > 1) {
                        workerState.rooms = workerState.rooms.filter(r => r.num !== '');
                        workerState.rooms.push(inputRows[0]);
                        needsSave = true;
                    }

                    if (needsSave) {
                        saveState();
                    }

                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙÙˆØ±Ø§Ù‹ Ø¨Ø£ÙŠ ØªØºÙŠÙŠØ± (Ù‡Ø°Ù‡ Ù‡ÙŠ Ù…ÙŠØ²Ø© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ù„Ø­Ø¸ÙŠØ©)
                    renderRooms();
                    updateLogUI();
                    updateStats();
                    // console.log("State loaded/updated successfully from Firebase.");
                } else {
                    console.log("No state document found in Firebase. Initializing empty state.");
                    // ğŸ”¥ Ø§Ù„Ø¥ØµÙ„Ø§Ø­: ÙŠØ¬Ø¨ ØªÙ‡ÙŠØ¦Ø© workerState.rooms Ù…Ø­Ù„ÙŠÙ‹Ø§ Ø¨ØµÙ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ù‚Ø¨Ù„ Ø­ÙØ¸ Ø§Ù„Ø­Ø§Ù„Ø© ğŸ”¥
                    workerState.rooms = [{ 
                        id: Date.now(), num: '', type: '', guestStatus: '', status: 'pending', start: 0, checkStart: 0, undoTimer: 0, timerLimit: 0 
                    }];
                    saveState(); 
                }
            }, (error) => {
                console.error("Error listening to state changes from Firebase:", error);
                // alert('ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Firebase. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø£Ùˆ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹.');
            });
        }

        function checkConn() {
            const el = document.getElementById('offline-indicator');
            el.style.display = navigator.onLine ? 'none' : 'block';
        }
        
        function generateDailyReport() {
            const total = workerState.log.length;
            const delayCount = workerState.log.filter(l => l.delay !== getTranslation('none')).length;
            
            let msg = `${getTranslation('report_title_wa', { num: 'N/A' }).replace('*ØªÙ‚Ø±ÙŠØ± Ù†Ø¸Ø§ÙØ© ØºØ±ÙØ© Ø±Ù‚Ù… N/A*','*')} \n`;
            msg += `${getTranslation('report_date', { date: new Date().toLocaleDateString(currentLang) })}\n\n`;
            msg += `${getTranslation('report_completed', { total: total })}\n`;
            msg += `${getTranslation('report_delayed', { delayed: delayCount })}\n\n`;
            msg += `${getTranslation('report_details')}\n`;
            
            msg += workerState.log.map(l => `${l.num}: ${l.cleanTime}Ø¯/${l.checkTime}Ø¯ (Ø¨Ø¯Ø£ ${l.startTimeStr})`).join('\n');
            
            window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, '_blank');
        }
        
        function isTimeAllowed() {
            const now = new Date();
            const hours = now.getHours();
            return hours >= 1 && hours < 24; 
        }

        // ğŸ—‘ï¸ NEW: Firebase Clear All Function - Replaces localStorage clearAllData()
        function clearAllData() {
            const mainDocRef = db.collection(collectionName).doc('main');
            
            // 1. Reset local state and necessary local storage items
            workerState.rooms = [{ 
                id: Date.now(), num: '', type: '', guestStatus: '', status: 'pending', start: 0, checkStart: 0, undoTimer: 0, timerLimit: 0 
            }];
            workerState.log = [];
            
            buffer = [];
            localStorage.removeItem('abella_buffer_v6'); 
            isTurboMode = false;
            localStorage.removeItem('abella_turbo_mode');

            // 2. Delete the Firestore document to force a clean start for all users
            mainDocRef.delete()
                .then(() => {
                    // After deletion, save the clean local state back to Firebase
                    // This re-creates the document with the initial empty state
                    saveState(); 
                    
                    // 3. Update UI locally and confirm (Real-time listener will sync across clients)
                    renderRooms();
                    updateStats();
                    updateLogUI();
                    document.getElementById('password-modal').style.display = 'none';
                    showConfirmation("toast_data_cleared");
                })
                .catch((error) => {
                    console.error("Error deleting state from Firebase:", error);
                    alert('ÙØ´Ù„ ÙÙŠ ØªØµÙÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Firebase. Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª.');
                });
        }

        // ğŸ—‘ï¸ UPDATE: clearLogOnly now uses saveState to sync with Firebase
        function clearLogOnly() {
            workerState.log = [];
            saveState(); // Save the state with empty log to Firebase
            renderRooms();
            updateStats();
            updateLogUI(); 
            document.getElementById('password-modal').style.display = 'none';
            showConfirmation("toast_log_cleared");
        }

        function showResetModal() {
            const isAllowed = isTimeAllowed();
            const statusMsg = document.getElementById('reset-status-msg');
            
            document.getElementById('password-modal').style.display = 'flex';
            document.getElementById('confirm-reset-btn').onclick = function() { checkPasswordAndReset('full_reset'); };
            document.getElementById('password-modal-title').innerText = getTranslation('password_modal_title_reset');

            if (isAllowed) {
                statusMsg.innerHTML = getTranslation('password_msg_allow');
            } else {
                statusMsg.innerHTML = getTranslation('password_msg_deny');
            }
        }
        
        function showLogClearModal() {
            const statusMsg = document.getElementById('reset-status-msg');

            document.getElementById('password-modal').style.display = 'flex';
            document.getElementById('confirm-reset-btn').onclick = function() { checkPasswordAndReset('log_only'); };
            document.getElementById('password-modal-title').innerText = getTranslation('password_modal_title_log');
            statusMsg.innerHTML = getTranslation('password_msg_log');
        }
        
        // ğŸ”’ SECURE CHECK
        function checkPasswordAndReset(actionType = 'full_reset') {
            const passwordInput = document.getElementById('admin-password').value.trim();
            
            // Hashing Check
            if (simpleHash(passwordInput) === ADMIN_HASH) {
                if (actionType === 'log_only') {
                    clearLogOnly();
                } else {
                    clearAllData();
                }
            } else {
                if (isTimeAllowed()) {
                    alert(getTranslation('alert_wrong_password_allowed'));
                } else {
                    alert(getTranslation('alert_wrong_password_denied'));
                }
            }
            document.getElementById('admin-password').value = ''; 
        }

        /* =======================================
           Translation system (New Robust System)
           ======================================= */

        // Utility to get translated string, including placeholders {key}
        function getTranslation(key, placeholders = {}) {
            // Fallback to 'ar' if currentLang data is missing
            const langData = TRANSLATIONS[currentLang] || TRANSLATIONS['ar'];
            let text = langData[key] || TRANSLATIONS['ar'][key] || key; // Fallback to key itself if all fails
            
            // Replace placeholders
            for (const pKey in placeholders) {
                text = text.replace(`{${pKey}}`, placeholders[pKey]);
            }
            return text;
        }

        // Function to apply translation based on data attributes
        function applyTranslation(lang) {
            // 1. Process standard elements using data-lang-key
            document.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.getAttribute('data-lang-key');
                const translation = getTranslation(key);

                if (translation) {
                     // Special case for H1 which contains a nested SPAN with its own key
                     if(el.id === 'header-text') {
                         // Update the main part of H1 (the node before the <br>)
                         if (el.childNodes.length > 0 && el.firstChild.nodeType === 3) {
                             el.firstChild.nodeValue = translation.split('<br>')[0]; // Set only the first part
                         } else {
                             el.textContent = translation.split('<br>')[0];
                         }
                         
                     } else if (el.tagName === 'SPAN' && el.parentElement.id === 'header-text') {
                         // Update the subtitle span (which is the child of the h1)
                         el.textContent = getTranslation('tracking_table'); // Using the dedicated key for the subtitle
                         
                     } else if (el.tagName === 'BUTTON' || el.tagName === 'SPAN' || el.tagName === 'DIV' || el.tagName === 'P' || el.tagName === 'H3' || el.tagName === 'TITLE') {
                        el.textContent = translation;
                     } else {
                         // Default to setting text content
                         el.textContent = translation;
                     }
                }
            });

            // 2. Process Attributes (Placeholders, Select Options, Titles)
            document.querySelectorAll('[data-lang-placeholder], select, input').forEach(el => {
                // Handle Placeholder
                const key = el.getAttribute('data-lang-placeholder');
                if (key) {
                    el.placeholder = getTranslation(key);
                }
                
                // Handle Select Options (Crucial for translating dropdown options)
                if (el.tagName === 'SELECT') {
                     Array.from(el.options).forEach(option => {
                         const optKey = option.getAttribute('data-lang-key');
                         if (optKey) {
                             option.text = getTranslation(optKey);
                         }
                     });
                }
            });
            
            // 3. Update dynamic/hardcoded texts that need refresh
            document.title = getTranslation('abella_system');
            document.getElementById('turbo-mode-btn').innerText = isTurboMode ? getTranslation('turbo_btn_off') : getTranslation('turbo_btn_on');
            document.getElementById('report-btn-action').innerText = getTranslation('send_daily_report');
            document.getElementById('log-none-p').innerText = getTranslation('log_none');
            document.getElementById('dev-footer-fixed').innerText = getTranslation('developed_by');
            document.getElementById('langBtn').innerText = getTranslation('lang_button');

            // Re-render rooms to update dynamic action buttons/badges
            renderRooms(); 
        }

        // Load a language by code (ar|en|ur|bn)
        function loadLang(lang) {
            if (!TRANSLATIONS[lang]) {
                console.warn(`Language data for ${lang} is missing. Falling back to Arabic.`);
                lang = 'ar';
            }
            currentLang = lang;
            
            // CRITICAL FIX: Update HTML attributes for directionality and language
            const html = document.documentElement;
            html.setAttribute('lang', lang);
            
            // Check for RTL languages (Arabic, Urdu are RTL among the list)
            const rtlLangs = ['ar', 'ur']; 
            if (rtlLangs.includes(lang)) {
                html.setAttribute('dir', 'rtl');
            } else {
                html.setAttribute('dir', 'ltr');
            }

            // Apply the translation
            applyTranslation(lang);

            // Save state 
            localStorage.setItem('workerLang', lang);
        }

        // Initialize language UI
        (function initLangUI() {
            // Load saved lang or default ar
            const saved = localStorage.getItem('workerLang') || 'ar';
            // Attach dropdown handlers
            const langBtn = document.getElementById('langBtn');
            const langMenu = document.getElementById('langMenu');
            if (!langBtn || !langMenu) return;

            langBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                langMenu.style.display = (langMenu.style.display === 'block') ? 'none' : 'block';
            });

            document.querySelectorAll('.langItem').forEach(item => {
                item.addEventListener('click', (ev) => {
                    const newLang = item.getAttribute('data-lang');
                    loadLang(newLang);
                    langMenu.style.display = 'none';
                });
            });

            // Close menu on outside click
            document.addEventListener('click', (e) => {
                if (!langMenu.contains(e.target) && !langBtn.contains(e.target)) {
                    langMenu.style.display = 'none';
                }
            });

            // Load initial language
            loadLang(saved);
        })();
    </script>
</body>
</html>
